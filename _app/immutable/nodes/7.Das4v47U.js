import{s as Q,a as Y,n as j,e as Z,o as x}from"../chunks/scheduler.bEJZjyk8.js";import{S as R,i as U,e as E,s as k,c as C,a as $,d,l as w,b as _,f as v,m as g,g as ee,o as X,j as D,k as S,p as q,q as y,r as z,u as B,v as te,w as I,x as N,t as p,h as b,y as A,z as V,A as ae,B as G}from"../chunks/index.4VFj14VL.js";import{e as H,l as le,b as se,C as re,a as ne,L as ie,N as oe}from"../chunks/Tooltip.svelte_svelte_type_style_lang.Zh-tvS1H.js";import{s as fe}from"../chunks/sum.o3Vi7g46.js";import{c as ce,a as he}from"../chunks/dsv.fs0VKOqp.js";function T(o,e,a){const t=o.slice();return t[6]=e[a],t}function F(o,e,a){const t=o.slice();return t[6]=e[a],t}function P(o){let e,a,t=o[6].label+"",l,c,h,f=o[6].description+"",i,n,s,r;return{c(){e=E("div"),a=E("h3"),l=D(t),c=k(),h=E("h4"),i=D(f),n=k(),this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0});var m=$(e);a=C(m,"H3",{class:!0});var L=$(a);l=S(L,t),L.forEach(d),c=w(m),h=C(m,"H4",{class:!0});var M=$(h);i=S(M,f),M.forEach(d),n=w(m),m.forEach(d),this.h()},h(){_(a,"class","label svelte-1fohxcf"),_(h,"class","description svelte-1fohxcf"),_(e,"class","legend-item svelte-1fohxcf"),q(e,"top",o[2](o[6].offset)+"px")},m(u,m){v(u,e,m),g(e,a),g(a,l),g(e,c),g(e,h),g(h,i),g(e,n),s||(r=Z(se.call(null,h)),s=!0)},p(u,m){m&4&&q(e,"top",u[2](u[6].offset)+"px")},d(u){u&&d(e),s=!1,r()}}}function W(o){let e,a,t=H(o[3]),l=[];for(let c=0;c<t.length;c+=1)l[c]=J(T(o,t,c));return{c(){e=y("svg"),a=y("g");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){e=z(c,"svg",{width:!0,height:!0});var h=$(e);a=z(h,"g",{class:!0});var f=$(a);for(let i=0;i<l.length;i+=1)l[i].l(f);f.forEach(d),h.forEach(d),this.h()},h(){_(a,"class","bar"),_(e,"width",o[0]),_(e,"height",o[1])},m(c,h){v(c,e,h),g(e,a);for(let f=0;f<l.length;f+=1)l[f]&&l[f].m(a,null)},p(c,h){if(h&13){t=H(c[3]);let f;for(f=0;f<t.length;f+=1){const i=T(c,t,f);l[f]?l[f].p(i,h):(l[f]=J(i),l[f].c(),l[f].m(a,null))}for(;f<l.length;f+=1)l[f].d(1);l.length=t.length}h&1&&_(e,"width",c[0]),h&2&&_(e,"height",c[1])},d(c){c&&d(e),X(l,c)}}}function J(o){let e,a,t,l,c=o[6].percentage+"",h,f,i,n,s;return{c(){e=y("g"),a=y("rect"),l=y("text"),h=D(c),f=D(` %
							`),this.h()},l(r){e=z(r,"g",{class:!0,transform:!0});var u=$(e);a=z(u,"rect",{width:!0,height:!0,class:!0}),$(a).forEach(d),l=z(u,"text",{class:!0,x:!0,y:!0});var m=$(l);h=S(m,c),f=S(m,` %
							`),m.forEach(d),u.forEach(d),this.h()},h(){_(a,"width",o[0]),_(a,"height",t=o[2](o[6].percentage)),_(a,"class","svelte-1fohxcf"),_(l,"class","label svelte-1fohxcf"),_(l,"x",i=o[0]*.5),_(l,"y",n=o[2](o[6].percentage)*.5),_(e,"class","subbar "+o[6].category+" svelte-1fohxcf"),_(e,"transform",s="translate(0,"+o[2](o[6].offset)+")")},m(r,u){v(r,e,u),g(e,a),g(e,l),g(l,h),g(l,f)},p(r,u){u&1&&_(a,"width",r[0]),u&4&&t!==(t=r[2](r[6].percentage))&&_(a,"height",t),u&1&&i!==(i=r[0]*.5)&&_(l,"x",i),u&4&&n!==(n=r[2](r[6].percentage)*.5)&&_(l,"y",n),u&4&&s!==(s="translate(0,"+r[2](r[6].offset)+")")&&_(e,"transform",s)},d(r){r&&d(e)}}}function ue(o){let e,a,t,l,c,h=H(o[3]),f=[];for(let n=0;n<h.length;n+=1)f[n]=P(F(o,h,n));let i=o[0]&&W(o);return{c(){e=E("div"),a=E("div");for(let n=0;n<f.length;n+=1)f[n].c();t=k(),l=E("div"),i&&i.c(),this.h()},l(n){e=C(n,"DIV",{class:!0});var s=$(e);a=C(s,"DIV",{class:!0});var r=$(a);for(let m=0;m<f.length;m+=1)f[m].l(r);r.forEach(d),t=w(s),l=C(s,"DIV",{class:!0});var u=$(l);i&&i.l(u),u.forEach(d),s.forEach(d),this.h()},h(){_(a,"class","legend svelte-1fohxcf"),_(l,"class","chart svelte-1fohxcf"),Y(()=>o[5].call(l)),_(e,"class","chart-container svelte-1fohxcf")},m(n,s){v(n,e,s),g(e,a);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(a,null);g(e,t),g(e,l),i&&i.m(l,null),c=ee(l,o[5].bind(l))},p(n,[s]){if(s&12){h=H(n[3]);let r;for(r=0;r<h.length;r+=1){const u=F(n,h,r);f[r]?f[r].p(u,s):(f[r]=P(u),f[r].c(),f[r].m(a,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=h.length}n[0]?i?i.p(n,s):(i=W(n),i.c(),i.m(l,null)):i&&(i.d(1),i=null)},i:j,o:j,d(n){n&&d(e),X(f,n),i&&i.d(),c()}}}function _e(o,e,a){let t,l,{data:c}=e,h;const f=c.map((n,s,r)=>({...n,offset:fe(r.slice(0,s),u=>u.percentage)}));function i(){h=this.clientWidth,a(0,h)}return o.$$set=n=>{"data"in n&&a(4,c=n.data)},o.$$.update=()=>{o.$$.dirty&1&&a(1,t=h*2.5),o.$$.dirty&2&&a(2,l=le().domain([0,100]).range([0,t]))},[h,t,l,f,c,i]}class de extends R{constructor(e){super(),U(this,e,_e,ue,Q,{data:4})}}function K(o){let e,a;return e=new ie({}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function me(o){let e;return{c(){e=D("Métissage en Géorgie")},l(a){e=S(a,"Métissage en Géorgie")},m(a,t){v(a,e,t)},d(a){a&&d(e)}}}function ge(o){let e;return{c(){e=D("Basé sur une étude de 40 000 individus d’origine noire")},l(a){e=S(a,"Basé sur une étude de 40 000 individus d’origine noire")},m(a,t){v(a,e,t)},d(a){a&&d(e)}}}function O(o){let e,a;return e=new de({props:{data:o[1]}}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p(t,l){const c={};l&2&&(c.data=t[1]),e.$set(c)},i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function pe(o){let e,a;return e=new oe({props:{prev:"/challenge04"}}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,l){N(e,t,l),a=!0},p:j,i(t){a||(p(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ve(o){let e,a="Semaine 5";return{c(){e=E("a"),e.textContent=a,this.h()},l(t){e=C(t,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),ae(e)!=="svelte-8upnwl"&&(e.textContent=a),this.h()},h(){_(e,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge05/original-plate-13.jpg"),_(e,"target","_blank"),_(e,"slot","week")},m(t,l){v(t,e,l)},p:j,d(t){t&&d(e)}}}function $e(o){let e,a,t,l,c,h,f,i=!o[0]&&K();t=new re({props:{$$slots:{subtitle:[ge],default:[me]},$$scope:{ctx:o}}});let n=o[1]&&O(o);return h=new ne({props:{$$slots:{week:[ve],default:[pe]},$$scope:{ctx:o}}}),{c(){e=k(),i&&i.c(),a=k(),B(t.$$.fragment),l=k(),n&&n.c(),c=k(),B(h.$$.fragment),this.h()},l(s){te("svelte-g4s6k5",document.head).forEach(d),e=w(s),i&&i.l(s),a=w(s),I(t.$$.fragment,s),l=w(s),n&&n.l(s),c=w(s),I(h.$$.fragment,s),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 4"},m(s,r){v(s,e,r),i&&i.m(s,r),v(s,a,r),N(t,s,r),v(s,l,r),n&&n.m(s,r),v(s,c,r),N(h,s,r),f=!0},p(s,[r]){s[0]?i&&(G(),b(i,1,1,()=>{i=null}),A()):i?r&1&&p(i,1):(i=K(),i.c(),p(i,1),i.m(a.parentNode,a));const u={};r&4&&(u.$$scope={dirty:r,ctx:s}),t.$set(u),s[1]?n?(n.p(s,r),r&2&&p(n,1)):(n=O(s),n.c(),p(n,1),n.m(c.parentNode,c)):n&&(G(),b(n,1,1,()=>{n=null}),A());const m={};r&4&&(m.$$scope={dirty:r,ctx:s}),h.$set(m)},i(s){f||(p(i),p(t.$$.fragment,s),p(n),p(h.$$.fragment,s),f=!0)},o(s){b(i),b(t.$$.fragment,s),b(n),b(h.$$.fragment,s),f=!1},d(s){s&&(d(e),d(a),d(l),d(c)),i&&i.d(s),V(t,s),n&&n.d(s),V(h,s)}}}function be(o,e,a){let t=!1,l;return x(async()=>{a(1,l=await ce("data/challenge05/data.csv",he)),setTimeout(()=>a(0,t=!0),500)}),[t,l]}class Se extends R{constructor(e){super(),U(this,e,be,$e,Q,{})}}export{Se as component};
