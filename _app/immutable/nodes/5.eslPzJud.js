import{s as te,a as oe,r as ue,o as fe,n as ne}from"../chunks/scheduler.bEJZjyk8.js";import{S as ae,i as re,e as A,c as L,a as M,d,b as _,f as v,g as he,t as $,B as D,h as b,y as G,q as O,s as I,C as P,r as R,l as N,o as me,j as E,k as C,m as y,E as F,n as q,u as H,w as T,x as j,z,p as V,v as ce,A as de}from"../chunks/index.4VFj14VL.js";import{i as le,r as _e,l as pe,e as W,L as ge,C as $e,a as ve,N as be}from"../chunks/Tooltip.svelte_svelte_type_style_lang.6tg1vEcr.js";import"../chunks/paths.slx1a0B9.js";import{T as we}from"../chunks/Tooltip.FxKoUnLJ.js";import{c as S}from"../chunks/utils.YkUfOGZi.js";import{I as J,m as ke}from"../chunks/max.uL6_f42n.js";import{c as ye,a as Ee}from"../chunks/dsv.fs0VKOqp.js";const K=Symbol("implicit");function se(){var n=new J,e=[],i=[],t=K;function l(r){let s=n.get(r);if(s===void 0){if(t!==K)return t;n.set(r,s=e.push(r)-1)}return i[s%i.length]}return l.domain=function(r){if(!arguments.length)return e.slice();e=[],n=new J;for(const s of r)n.has(s)||n.set(s,e.push(s)-1);return l},l.range=function(r){return arguments.length?(i=Array.from(r),l):i.slice()},l.unknown=function(r){return arguments.length?(t=r,l):t},l.copy=function(){return se(e,i).unknown(t)},le.apply(l,arguments),l}function ie(){var n=se().unknown(void 0),e=n.domain,i=n.range,t=0,l=1,r,s,a=!1,o=0,h=0,u=.5;delete n.unknown;function g(){var f=e().length,w=l<t,p=w?l:t,m=w?t:l;r=(m-p)/Math.max(1,f-o+h*2),a&&(r=Math.floor(r)),p+=(m-p-r*(f-o))*u,s=r*(1-o),a&&(p=Math.round(p),s=Math.round(s));var c=_e(f).map(function(k){return p+r*k});return i(w?c.reverse():c)}return n.domain=function(f){return arguments.length?(e(f),g()):e()},n.range=function(f){return arguments.length?([t,l]=f,t=+t,l=+l,g()):[t,l]},n.rangeRound=function(f){return[t,l]=f,t=+t,l=+l,a=!0,g()},n.bandwidth=function(){return s},n.step=function(){return r},n.round=function(f){return arguments.length?(a=!!f,g()):a},n.padding=function(f){return arguments.length?(o=Math.min(1,h=+f),g()):o},n.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),g()):o},n.paddingOuter=function(f){return arguments.length?(h=+f,g()):h},n.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),g()):u},n.copy=function(){return ie(e(),[t,l]).round(a).paddingInner(o).paddingOuter(h).align(u)},le.apply(g(),arguments)}function Q(n,e,i){const t=n.slice();t[11]=e[i],t[14]=i;const l=t[5](t[11].value)-t[5](0);return t[12]=l,t}function U(n){let e,i,t,l,r=W(n[0]),s=[];for(let o=0;o<r.length;o+=1)s[o]=Y(Q(n,r,o));let a=n[3]&&Z(n);return{c(){e=O("svg");for(let o=0;o<s.length;o+=1)s[o].c();i=I(),a&&a.c(),t=P(),this.h()},l(o){e=R(o,"svg",{width:!0,height:!0});var h=M(e);for(let u=0;u<s.length;u+=1)s[u].l(h);h.forEach(d),i=N(o),a&&a.l(o),t=P(),this.h()},h(){_(e,"width",n[1]),_(e,"height",n[2])},m(o,h){v(o,e,h);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(e,null);v(o,i,h),a&&a.m(o,h),v(o,t,h),l=!0},p(o,h){if(h&121){r=W(o[0]);let u;for(u=0;u<r.length;u+=1){const g=Q(o,r,u);s[u]?s[u].p(g,h):(s[u]=Y(g),s[u].c(),s[u].m(e,null))}for(;u<s.length;u+=1)s[u].d(1);s.length=r.length}(!l||h&2)&&_(e,"width",o[1]),(!l||h&4)&&_(e,"height",o[2]),o[3]?a?(a.p(o,h),h&8&&$(a,1)):(a=Z(o),a.c(),$(a,1),a.m(t.parentNode,t)):a&&(D(),b(a,1,1,()=>{a=null}),G())},i(o){l||($(a),l=!0)},o(o){b(a),l=!1},d(o){o&&(d(e),d(i),d(t)),me(s,o),a&&a.d(o)}}}function X(n){let e,i=S(",d")(n[6](n[11].value))+"",t,l,r;return{c(){e=O("text"),t=E(i),this.h()},l(s){e=R(s,"text",{class:!0,x:!0,y:!0});var a=M(e);t=C(a,i),a.forEach(d),this.h()},h(){_(e,"class","value svelte-78fsbx"),_(e,"x",l=n[12]*.5),_(e,"y",r=n[4].bandwidth()-3)},m(s,a){v(s,e,a),y(e,t)},p(s,a){a&1&&i!==(i=S(",d")(s[6](s[11].value))+"")&&q(t,i),a&33&&l!==(l=s[12]*.5)&&_(e,"x",l),a&16&&r!==(r=s[4].bandwidth()-3)&&_(e,"y",r)},d(s){s&&d(e)}}}function Y(n){var p;let e,i,t,l,r,s=n[11].year+"",a,o,h,u,g,f=((p=n[3])==null?void 0:p.datum.year)!==n[11].year&&(n[14]===0||n[14]===n[0].length-1)&&X(n);function w(){return n[7](n[11],n[12])}return{c(){e=O("g"),i=O("rect"),r=O("text"),a=E(s),f&&f.c(),this.h()},l(m){e=R(m,"g",{class:!0,role:!0,transform:!0});var c=M(e);i=R(c,"rect",{width:!0,height:!0,class:!0}),M(i).forEach(d),r=R(c,"text",{class:!0,x:!0,y:!0});var k=M(r);a=C(k,s),k.forEach(d),f&&f.l(c),c.forEach(d),this.h()},h(){_(i,"width",t=n[12]),_(i,"height",l=n[4].bandwidth()),_(i,"class","svelte-78fsbx"),_(r,"class","label svelte-78fsbx"),_(r,"x",0),_(r,"y",o=n[4].bandwidth()*.5),_(e,"class","bar"),_(e,"role","img"),_(e,"transform",h="translate("+n[5](0)+", "+n[4](n[11].year)+")")},m(m,c){v(m,e,c),y(e,i),y(e,r),y(r,a),f&&f.m(e,null),u||(g=[F(e,"mouseenter",w),F(e,"mouseleave",n[8])],u=!0)},p(m,c){var k;n=m,c&33&&t!==(t=n[12])&&_(i,"width",t),c&16&&l!==(l=n[4].bandwidth())&&_(i,"height",l),c&1&&s!==(s=n[11].year+"")&&q(a,s),c&16&&o!==(o=n[4].bandwidth()*.5)&&_(r,"y",o),((k=n[3])==null?void 0:k.datum.year)!==n[11].year&&(n[14]===0||n[14]===n[0].length-1)?f?f.p(n,c):(f=X(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null),c&49&&h!==(h="translate("+n[5](0)+", "+n[4](n[11].year)+")")&&_(e,"transform",h)},d(m){m&&d(e),f&&f.d(),u=!1,ue(g)}}}function Z(n){let e,i;return e=new we({props:{x:n[3].position[0],y:n[3].position[1],width:n[1],offset:.5,$$slots:{default:[Ce]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),i=!0},p(t,l){const r={};l&8&&(r.x=t[3].position[0]),l&8&&(r.y=t[3].position[1]),l&2&&(r.width=t[1]),l&32776&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){i||($(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function Ce(n){let e,i=n[3].datum.year+"",t,l,r,s=S(",d")(n[6](n[3].datum.value))+"",a,o,h,u,g,f=S(",d")(n[3].datum.value)+"",w,p;return{c(){e=A("h3"),t=E(i),l=I(),r=A("h4"),a=E(s),o=E(" hectares"),h=I(),u=A("p"),g=E("("),w=E(f),p=E(" acres)"),this.h()},l(m){e=L(m,"H3",{});var c=M(e);t=C(c,i),c.forEach(d),l=N(m),r=L(m,"H4",{});var k=M(r);a=C(k,s),o=C(k," hectares"),k.forEach(d),h=N(m),u=L(m,"P",{style:!0});var B=M(u);g=C(B,"("),w=C(B,f),p=C(B," acres)"),B.forEach(d),this.h()},h(){V(u,"text-align","center"),V(u,"justify-content","center")},m(m,c){v(m,e,c),y(e,t),v(m,l,c),v(m,r,c),y(r,a),y(r,o),v(m,h,c),v(m,u,c),y(u,g),y(u,w),y(u,p)},p(m,c){c&8&&i!==(i=m[3].datum.year+"")&&q(t,i),c&8&&s!==(s=S(",d")(m[6](m[3].datum.value))+"")&&q(a,s),c&8&&f!==(f=S(",d")(m[3].datum.value)+"")&&q(w,f)},d(m){m&&(d(e),d(l),d(r),d(h),d(u))}}}function Me(n){let e,i,t,l=n[1]&&U(n);return{c(){e=A("div"),l&&l.c(),this.h()},l(r){e=L(r,"DIV",{class:!0});var s=M(e);l&&l.l(s),s.forEach(d),this.h()},h(){_(e,"class","chart svelte-78fsbx"),oe(()=>n[9].call(e))},m(r,s){v(r,e,s),l&&l.m(e,null),i=he(e,n[9].bind(e)),t=!0},p(r,[s]){r[1]?l?(l.p(r,s),s&2&&$(l,1)):(l=U(r),l.c(),$(l,1),l.m(e,null)):l&&(D(),b(l,1,1,()=>{l=null}),G())},i(r){t||($(l),t=!0)},o(r){b(l),t=!1},d(r){r&&d(e),l&&l.d(),i()}}}function Ie(n,e,i){let t,l,r,{data:s}=e,a;const o={top:0,right:0,bottom:0,left:45},h=p=>p/2.471;let u=null;const g=(p,m)=>{i(3,u={datum:p,position:[l(0)+m-r.bandwidth()*.5,r(p.year)+r.bandwidth()*.5]})},f=()=>i(3,u=null);function w(){a=this.clientWidth,i(1,a)}return n.$$set=p=>{"data"in p&&i(0,s=p.data)},n.$$.update=()=>{n.$$.dirty&2&&i(2,t=a*1.25),n.$$.dirty&3&&i(5,l=pe().domain([0,ke(s,p=>p.value)]).range([o.left,a-o.right])),n.$$.dirty&5&&i(4,r=ie().domain(s.map(p=>p.year)).range([o.top,t-o.bottom]).paddingInner(.45))},[s,a,t,u,r,l,h,g,f,w]}class Ne extends ae{constructor(e){super(),re(this,e,Ie,Me,te,{data:0})}}function x(n){let e,i;return e=new ge({}),{c(){H(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),i=!0},i(t){i||($(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function ee(n){let e,i,t,l,r,s;return e=new $e({props:{$$slots:{default:[Se]},$$scope:{ctx:n}}}),t=new Ne({props:{data:n[1]}}),r=new ve({props:{$$slots:{week:[Te],default:[He]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),i=I(),H(t.$$.fragment),l=I(),H(r.$$.fragment)},l(a){T(e.$$.fragment,a),i=N(a),T(t.$$.fragment,a),l=N(a),T(r.$$.fragment,a)},m(a,o){j(e,a,o),v(a,i,o),j(t,a,o),v(a,l,o),j(r,a,o),s=!0},p(a,o){const h={};o&4&&(h.$$scope={dirty:o,ctx:a}),e.$set(h);const u={};o&2&&(u.data=a[1]),t.$set(u);const g={};o&4&&(g.$$scope={dirty:o,ctx:a}),r.$set(g)},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(r.$$.fragment,a),s=!0)},o(a){b(e.$$.fragment,a),b(t.$$.fragment,a),b(r.$$.fragment,a),s=!1},d(a){a&&(d(i),d(l)),z(e,a),z(t,a),z(r,a)}}}function Se(n){let e;return{c(){e=E("Hectares de terrain appartenant à des Noirs en Géorgie")},l(i){e=C(i,"Hectares de terrain appartenant à des Noirs en Géorgie")},m(i,t){v(i,e,t)},d(i){i&&d(e)}}}function He(n){let e,i;return e=new be({props:{prev:"/challenge02",next:"/challenge04"}}),{c(){H(e.$$.fragment)},l(t){T(e.$$.fragment,t)},m(t,l){j(e,t,l),i=!0},p:ne,i(t){i||($(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){z(e,t)}}}function Te(n){let e,i="Semaine 3";return{c(){e=A("a"),e.textContent=i,this.h()},l(t){e=L(t,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),de(e)!=="svelte-8h3x35"&&(e.textContent=i),this.h()},h(){_(e,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge03/original-plate-19.jpg"),_(e,"target","_blank"),_(e,"slot","week")},m(t,l){v(t,e,l)},p:ne,d(t){t&&d(e)}}}function je(n){let e,i,t,l,r=!n[0]&&x(),s=n[1]&&ee(n);return{c(){e=I(),r&&r.c(),i=I(),s&&s.c(),t=P(),this.h()},l(a){ce("svelte-1l9r69k",document.head).forEach(d),e=N(a),r&&r.l(a),i=N(a),s&&s.l(a),t=P(),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 3"},m(a,o){v(a,e,o),r&&r.m(a,o),v(a,i,o),s&&s.m(a,o),v(a,t,o),l=!0},p(a,[o]){a[0]?r&&(D(),b(r,1,1,()=>{r=null}),G()):r?o&1&&$(r,1):(r=x(),r.c(),$(r,1),r.m(i.parentNode,i)),a[1]?s?(s.p(a,o),o&2&&$(s,1)):(s=ee(a),s.c(),$(s,1),s.m(t.parentNode,t)):s&&(D(),b(s,1,1,()=>{s=null}),G())},i(a){l||($(r),$(s),l=!0)},o(a){b(r),b(s),l=!1},d(a){a&&(d(e),d(i),d(t)),r&&r.d(a),s&&s.d(a)}}}function ze(n,e,i){let t=!1,l;return fe(async()=>{i(1,l=await ye("data/challenge03/data.csv",Ee)),setTimeout(()=>i(0,t=!0),500)}),[t,l]}class Pe extends ae{constructor(e){super(),re(this,e,ze,je,te,{})}}export{Pe as component};
