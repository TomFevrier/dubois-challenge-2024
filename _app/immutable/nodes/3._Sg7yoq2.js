import{s as Et,a as Ee,k as Ot,u as Se,g as we,b as ye,r as $e,n as Hn,o as Pe,t as Re}from"../chunks/scheduler.cOoJ6ag-.js";import{S as St,i as wt,e as X,c as Y,a as Z,d as N,k as T,g as V,A as Qt,l as O,m as x,t as yn,s as nn,B as it,b as $n,f as tn,C as rt,h as G,j as Xn,q as Ut,o as bt,D as xt,y as Rt,u as cn,v as pn,w as hn,x as gn,G as Yn,p as Ne,n as Nt,F as Me}from"../chunks/index.Ml7HnLXC.js";import{h as An,i as Dn,j as B,s as q,k as _n,r as F,t as Q,m as K,n as L,p as I,o as ke,q as A,u as en,v as Mt,z as Ce,A as Ie,B as dn,D as rn,E as ne,F as En,G as ze,H as Ae,I as De,e as Zn,J as Te,C as Le,g as He,L as Be,N as qe}from"../chunks/utils.Y0S3e6qt.js";function Fe(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Ve(t,n){return fetch(t,n).then(Fe)}function*We(t){for(const n of t)yield*n}function te(t){return Array.from(We(t))}function lt(t){return[An(t[1],t[0]),Dn(t[2])]}function Pn(t){var n=t[0],i=t[1],e=B(i);return[e*B(n),e*q(n),q(i)]}function qn(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function jn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function xn(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Fn(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function ot(t){var n=_n(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function ut(t,n){function i(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(i.invert=function(e,r){return e=n.invert(e,r),e&&t.invert(e[0],e[1])}),i}function ft(t,n){return L(t)>I&&(t-=Math.round(t/Q)*Q),[t,n]}ft.invert=ft;function ee(t,n,i){return(t%=Q)?n||i?ut(Ct(t),It(n,i)):Ct(t):n||i?It(n,i):ft}function kt(t){return function(n,i){return n+=t,L(n)>I&&(n-=Math.round(n/Q)*Q),[n,i]}}function Ct(t){var n=kt(t);return n.invert=kt(-t),n}function It(t,n){var i=B(t),e=q(t),r=B(n),o=q(n);function a(f,g){var h=B(g),l=B(f)*h,s=q(f)*h,c=q(g),p=c*i+l*e;return[An(s*r-p*o,l*i-c*e),Dn(p*r+s*o)]}return a.invert=function(f,g){var h=B(g),l=B(f)*h,s=q(f)*h,c=q(g),p=c*r-s*o;return[An(s*r+c*o,l*i+p*e),Dn(p*i-l*e)]},a}function Ge(t){t=ee(t[0]*F,t[1]*F,t.length>2?t[2]*F:0);function n(i){return i=t(i[0]*F,i[1]*F),i[0]*=K,i[1]*=K,i}return n.invert=function(i){return i=t.invert(i[0]*F,i[1]*F),i[0]*=K,i[1]*=K,i},n}function Xe(t,n,i,e,r,o){if(i){var a=B(n),f=q(n),g=e*i;r==null?(r=n+e*Q,o=n-g/2):(r=zt(a,r),o=zt(a,o),(e>0?r<o:r>o)&&(r+=e*Q));for(var h,l=r;e>0?l>o:l<o;l-=g)h=lt([a,-f*B(l),-f*q(l)]),t.point(h[0],h[1])}}function zt(t,n){n=Pn(n),n[0]-=t,ot(n);var i=ke(-n[1]);return((-n[2]<0?-i:i)+Q-A)%Q}function ie(){var t=[],n;return{point:function(i,e,r){n.push([i,e,r])},lineStart:function(){t.push(n=[])},lineEnd:en,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var i=t;return t=[],n=null,i}}}function Gn(t,n){return L(t[0]-n[0])<A&&L(t[1]-n[1])<A}function Vn(t,n,i,e){this.x=t,this.z=n,this.o=i,this.e=e,this.v=!1,this.n=this.p=null}function re(t,n,i,e,r){var o=[],a=[],f,g;if(t.forEach(function(u){if(!((v=u.length-1)<=0)){var v,d=u[0],S=u[v],w;if(Gn(d,S)){if(!d[2]&&!S[2]){for(r.lineStart(),f=0;f<v;++f)r.point((d=u[f])[0],d[1]);r.lineEnd();return}S[0]+=2*A}o.push(w=new Vn(d,u,null,!0)),a.push(w.o=new Vn(d,null,w,!1)),o.push(w=new Vn(S,u,null,!1)),a.push(w.o=new Vn(S,null,w,!0))}}),!!o.length){for(a.sort(n),At(o),At(a),f=0,g=a.length;f<g;++f)a[f].e=i=!i;for(var h=o[0],l,s;;){for(var c=h,p=!0;c.v;)if((c=c.n)===h)return;l=c.z,r.lineStart();do{if(c.v=c.o.v=!0,c.e){if(p)for(f=0,g=l.length;f<g;++f)r.point((s=l[f])[0],s[1]);else e(c.x,c.n.x,1,r);c=c.n}else{if(p)for(l=c.p.z,f=l.length-1;f>=0;--f)r.point((s=l[f])[0],s[1]);else e(c.x,c.p.x,-1,r);c=c.p}c=c.o,l=c.z,p=!p}while(!c.v);r.lineEnd()}}}function At(t){if(n=t.length){for(var n,i=0,e=t[0],r;++i<n;)e.n=r=t[i],r.p=e,e=r;e.n=r=t[0],r.p=e}}function nt(t){return L(t[0])<=I?t[0]:Ie(t[0])*((L(t[0])+I)%Q-I)}function Ye(t,n){var i=nt(n),e=n[1],r=q(e),o=[q(i),-B(i),0],a=0,f=0,g=new dn;r===1?e=rn+A:r===-1&&(e=-rn-A);for(var h=0,l=t.length;h<l;++h)if(c=(s=t[h]).length)for(var s,c,p=s[c-1],u=nt(p),v=p[1]/2+Mt,d=q(v),S=B(v),w=0;w<c;++w,u=m,d=y,S=C,p=$){var $=s[w],m=nt($),E=$[1]/2+Mt,y=q(E),C=B(E),R=m-u,k=R>=0?1:-1,D=k*R,P=D>I,j=d*y;if(g.add(An(j*k*q(D),S*C+j*B(D))),a+=P?R+k*Q:R,P^u>=i^m>=i){var H=jn(Pn(p),Pn($));ot(H);var z=jn(o,H);ot(z);var _=(P^R>=0?-1:1)*Dn(z[2]);(e>_||e===_&&(H[0]||H[1]))&&(f+=P^R>=0?1:-1)}}return(a<-A||a<A&&g<-Ce)^f&1}function le(t,n,i,e){return function(r){var o=n(r),a=ie(),f=n(a),g=!1,h,l,s,c={point:p,lineStart:v,lineEnd:d,polygonStart:function(){c.point=S,c.lineStart=w,c.lineEnd=$,l=[],h=[]},polygonEnd:function(){c.point=p,c.lineStart=v,c.lineEnd=d,l=te(l);var m=Ye(h,e);l.length?(g||(r.polygonStart(),g=!0),re(l,je,m,i,r)):m&&(g||(r.polygonStart(),g=!0),r.lineStart(),i(null,null,1,r),r.lineEnd()),g&&(r.polygonEnd(),g=!1),l=h=null},sphere:function(){r.polygonStart(),r.lineStart(),i(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function p(m,E){t(m,E)&&r.point(m,E)}function u(m,E){o.point(m,E)}function v(){c.point=u,o.lineStart()}function d(){c.point=p,o.lineEnd()}function S(m,E){s.push([m,E]),f.point(m,E)}function w(){f.lineStart(),s=[]}function $(){S(s[0][0],s[0][1]),f.lineEnd();var m=f.clean(),E=a.result(),y,C=E.length,R,k,D;if(s.pop(),h.push(s),s=null,!!C){if(m&1){if(k=E[0],(R=k.length-1)>0){for(g||(r.polygonStart(),g=!0),r.lineStart(),y=0;y<R;++y)r.point((D=k[y])[0],D[1]);r.lineEnd()}return}C>1&&m&2&&E.push(E.pop().concat(E.shift())),l.push(E.filter(Ze))}}return c}}function Ze(t){return t.length>1}function je(t,n){return((t=t.x)[0]<0?t[1]-rn-A:rn-t[1])-((n=n.x)[0]<0?n[1]-rn-A:rn-n[1])}const Dt=le(function(){return!0},Je,Oe,[-I,-rn]);function Je(t){var n=NaN,i=NaN,e=NaN,r;return{lineStart:function(){t.lineStart(),r=1},point:function(o,a){var f=o>0?I:-I,g=L(o-n);L(g-I)<A?(t.point(n,i=(i+a)/2>0?rn:-rn),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(f,i),t.point(o,i),r=0):e!==f&&g>=I&&(L(n-e)<A&&(n-=e*A),L(o-f)<A&&(o-=f*A),i=Ke(n,i,o,a),t.point(e,i),t.lineEnd(),t.lineStart(),t.point(f,i),r=0),t.point(n=o,i=a),e=f},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-r}}}function Ke(t,n,i,e){var r,o,a=q(t-i);return L(a)>A?ne((q(n)*(o=B(e))*q(i)-q(e)*(r=B(n))*q(t))/(r*o*a)):(n+e)/2}function Oe(t,n,i,e){var r;if(t==null)r=i*rn,e.point(-I,r),e.point(0,r),e.point(I,r),e.point(I,0),e.point(I,-r),e.point(0,-r),e.point(-I,-r),e.point(-I,0),e.point(-I,r);else if(L(t[0]-n[0])>A){var o=t[0]<n[0]?I:-I;r=i*o/2,e.point(-o,r),e.point(0,r),e.point(o,r)}else e.point(n[0],n[1])}function Qe(t){var n=B(t),i=6*F,e=n>0,r=L(n)>A;function o(l,s,c,p){Xe(p,t,i,c,l,s)}function a(l,s){return B(l)*B(s)>n}function f(l){var s,c,p,u,v;return{lineStart:function(){u=p=!1,v=1},point:function(d,S){var w=[d,S],$,m=a(d,S),E=e?m?0:h(d,S):m?h(d+(d<0?I:-I),S):0;if(!s&&(u=p=m)&&l.lineStart(),m!==p&&($=g(s,w),(!$||Gn(s,$)||Gn(w,$))&&(w[2]=1)),m!==p)v=0,m?(l.lineStart(),$=g(w,s),l.point($[0],$[1])):($=g(s,w),l.point($[0],$[1],2),l.lineEnd()),s=$;else if(r&&s&&e^m){var y;!(E&c)&&(y=g(w,s,!0))&&(v=0,e?(l.lineStart(),l.point(y[0][0],y[0][1]),l.point(y[1][0],y[1][1]),l.lineEnd()):(l.point(y[1][0],y[1][1]),l.lineEnd(),l.lineStart(),l.point(y[0][0],y[0][1],3)))}m&&(!s||!Gn(s,w))&&l.point(w[0],w[1]),s=w,p=m,c=E},lineEnd:function(){p&&l.lineEnd(),s=null},clean:function(){return v|(u&&p)<<1}}}function g(l,s,c){var p=Pn(l),u=Pn(s),v=[1,0,0],d=jn(p,u),S=qn(d,d),w=d[0],$=S-w*w;if(!$)return!c&&l;var m=n*S/$,E=-n*w/$,y=jn(v,d),C=Fn(v,m),R=Fn(d,E);xn(C,R);var k=y,D=qn(C,k),P=qn(k,k),j=D*D-P*(qn(C,C)-1);if(!(j<0)){var H=_n(j),z=Fn(k,(-D-H)/P);if(xn(z,C),z=lt(z),!c)return z;var _=l[0],M=s[0],W=l[1],J=s[1],U;M<_&&(U=_,_=M,M=U);var Nn=M-_,un=L(Nn-I)<A,sn=un||Nn<A;if(!un&&J<W&&(U=W,W=J,J=U),sn?un?W+J>0^z[1]<(L(z[0]-_)<A?W:J):W<=z[1]&&z[1]<=J:Nn>I^(_<=z[0]&&z[0]<=M)){var fn=Fn(k,(-D+H)/P);return xn(fn,C),[z,lt(fn)]}}}function h(l,s){var c=e?t:I-t,p=0;return l<-c?p|=1:l>c&&(p|=2),s<-c?p|=4:s>c&&(p|=8),p}return le(a,f,o,e?[0,-t]:[-I,t-I])}function Ue(t,n,i,e,r,o){var a=t[0],f=t[1],g=n[0],h=n[1],l=0,s=1,c=g-a,p=h-f,u;if(u=i-a,!(!c&&u>0)){if(u/=c,c<0){if(u<l)return;u<s&&(s=u)}else if(c>0){if(u>s)return;u>l&&(l=u)}if(u=r-a,!(!c&&u<0)){if(u/=c,c<0){if(u>s)return;u>l&&(l=u)}else if(c>0){if(u<l)return;u<s&&(s=u)}if(u=e-f,!(!p&&u>0)){if(u/=p,p<0){if(u<l)return;u<s&&(s=u)}else if(p>0){if(u>s)return;u>l&&(l=u)}if(u=o-f,!(!p&&u<0)){if(u/=p,p<0){if(u>s)return;u>l&&(l=u)}else if(p>0){if(u<l)return;u<s&&(s=u)}return l>0&&(t[0]=a+l*c,t[1]=f+l*p),s<1&&(n[0]=a+s*c,n[1]=f+s*p),!0}}}}}var Mn=1e9,Wn=-Mn;function be(t,n,i,e){function r(h,l){return t<=h&&h<=i&&n<=l&&l<=e}function o(h,l,s,c){var p=0,u=0;if(h==null||(p=a(h,s))!==(u=a(l,s))||g(h,l)<0^s>0)do c.point(p===0||p===3?t:i,p>1?e:n);while((p=(p+s+4)%4)!==u);else c.point(l[0],l[1])}function a(h,l){return L(h[0]-t)<A?l>0?0:3:L(h[0]-i)<A?l>0?2:1:L(h[1]-n)<A?l>0?1:0:l>0?3:2}function f(h,l){return g(h.x,l.x)}function g(h,l){var s=a(h,1),c=a(l,1);return s!==c?s-c:s===0?l[1]-h[1]:s===1?h[0]-l[0]:s===2?h[1]-l[1]:l[0]-h[0]}return function(h){var l=h,s=ie(),c,p,u,v,d,S,w,$,m,E,y,C={point:R,lineStart:j,lineEnd:H,polygonStart:D,polygonEnd:P};function R(_,M){r(_,M)&&l.point(_,M)}function k(){for(var _=0,M=0,W=p.length;M<W;++M)for(var J=p[M],U=1,Nn=J.length,un=J[0],sn,fn,Bn=un[0],mn=un[1];U<Nn;++U)sn=Bn,fn=mn,un=J[U],Bn=un[0],mn=un[1],fn<=e?mn>e&&(Bn-sn)*(e-fn)>(mn-fn)*(t-sn)&&++_:mn<=e&&(Bn-sn)*(e-fn)<(mn-fn)*(t-sn)&&--_;return _}function D(){l=s,c=[],p=[],y=!0}function P(){var _=k(),M=y&&_,W=(c=te(c)).length;(M||W)&&(h.polygonStart(),M&&(h.lineStart(),o(null,null,1,h),h.lineEnd()),W&&re(c,f,_,o,h),h.polygonEnd()),l=h,c=p=u=null}function j(){C.point=z,p&&p.push(u=[]),E=!0,m=!1,w=$=NaN}function H(){c&&(z(v,d),S&&m&&s.rejoin(),c.push(s.result())),C.point=R,m&&l.lineEnd()}function z(_,M){var W=r(_,M);if(p&&u.push([_,M]),E)v=_,d=M,S=W,E=!1,W&&(l.lineStart(),l.point(_,M));else if(W&&m)l.point(_,M);else{var J=[w=Math.max(Wn,Math.min(Mn,w)),$=Math.max(Wn,Math.min(Mn,$))],U=[_=Math.max(Wn,Math.min(Mn,_)),M=Math.max(Wn,Math.min(Mn,M))];Ue(J,U,t,n,i,e)?(m||(l.lineStart(),l.point(J[0],J[1])),l.point(U[0],U[1]),W||l.lineEnd(),y=!1):W&&(l.lineStart(),l.point(_,M),y=!1)}w=_,$=M,m=W}return C}}const at=t=>t;var tt=new dn,st=new dn,oe,ue,ct,pt,an={point:en,lineStart:en,lineEnd:en,polygonStart:function(){an.lineStart=xe,an.lineEnd=ti},polygonEnd:function(){an.lineStart=an.lineEnd=an.point=en,tt.add(L(st)),st=new dn},result:function(){var t=tt/2;return tt=new dn,t}};function xe(){an.point=ni}function ni(t,n){an.point=fe,oe=ct=t,ue=pt=n}function fe(t,n){st.add(pt*t-ct*n),ct=t,pt=n}function ti(){fe(oe,ue)}var Rn=1/0,Jn=Rn,Tn=-Rn,Kn=Tn,On={point:ei,lineStart:en,lineEnd:en,polygonStart:en,polygonEnd:en,result:function(){var t=[[Rn,Jn],[Tn,Kn]];return Tn=Kn=-(Jn=Rn=1/0),t}};function ei(t,n){t<Rn&&(Rn=t),t>Tn&&(Tn=t),n<Jn&&(Jn=n),n>Kn&&(Kn=n)}var ht=0,gt=0,kn=0,Qn=0,Un=0,Sn=0,dt=0,vt=0,Cn=0,ae,se,ln,on,b={point:vn,lineStart:Tt,lineEnd:Lt,polygonStart:function(){b.lineStart=li,b.lineEnd=oi},polygonEnd:function(){b.point=vn,b.lineStart=Tt,b.lineEnd=Lt},result:function(){var t=Cn?[dt/Cn,vt/Cn]:Sn?[Qn/Sn,Un/Sn]:kn?[ht/kn,gt/kn]:[NaN,NaN];return ht=gt=kn=Qn=Un=Sn=dt=vt=Cn=0,t}};function vn(t,n){ht+=t,gt+=n,++kn}function Tt(){b.point=ii}function ii(t,n){b.point=ri,vn(ln=t,on=n)}function ri(t,n){var i=t-ln,e=n-on,r=_n(i*i+e*e);Qn+=r*(ln+t)/2,Un+=r*(on+n)/2,Sn+=r,vn(ln=t,on=n)}function Lt(){b.point=vn}function li(){b.point=ui}function oi(){ce(ae,se)}function ui(t,n){b.point=ce,vn(ae=ln=t,se=on=n)}function ce(t,n){var i=t-ln,e=n-on,r=_n(i*i+e*e);Qn+=r*(ln+t)/2,Un+=r*(on+n)/2,Sn+=r,r=on*t-ln*n,dt+=r*(ln+t),vt+=r*(on+n),Cn+=r*3,vn(ln=t,on=n)}function pe(t){this._context=t}pe.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:{this._context.moveTo(t,n),this._point=1;break}case 1:{this._context.lineTo(t,n);break}default:{this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Q);break}}},result:en};var _t=new dn,et,he,ge,In,zn,Ln={point:en,lineStart:function(){Ln.point=fi},lineEnd:function(){et&&de(he,ge),Ln.point=en},polygonStart:function(){et=!0},polygonEnd:function(){et=null},result:function(){var t=+_t;return _t=new dn,t}};function fi(t,n){Ln.point=de,he=In=t,ge=zn=n}function de(t,n){In-=t,zn-=n,_t.add(_n(In*In+zn*zn)),In=t,zn=n}let Ht,bn,Bt,qt;class Ft{constructor(n){this._append=n==null?ve:ai(n),this._radius=4.5,this._=""}pointRadius(n){return this._radius=+n,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(n,i){switch(this._point){case 0:{this._append`M${n},${i}`,this._point=1;break}case 1:{this._append`L${n},${i}`;break}default:{if(this._append`M${n},${i}`,this._radius!==Bt||this._append!==bn){const e=this._radius,r=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,Bt=e,bn=this._append,qt=this._,this._=r}this._+=qt;break}}}result(){const n=this._;return this._="",n.length?n:null}}function ve(t){let n=1;this._+=t[0];for(const i=t.length;n<i;++n)this._+=arguments[n]+t[n]}function ai(t){const n=Math.floor(t);if(!(n>=0))throw new RangeError(`invalid digits: ${t}`);if(n>15)return ve;if(n!==Ht){const i=10**n;Ht=n,bn=function(r){let o=1;this._+=r[0];for(const a=r.length;o<a;++o)this._+=Math.round(arguments[o]*i)/i+r[o]}}return bn}function si(t,n){let i=3,e=4.5,r,o;function a(f){return f&&(typeof e=="function"&&o.pointRadius(+e.apply(this,arguments)),En(f,r(o))),o.result()}return a.area=function(f){return En(f,r(an)),an.result()},a.measure=function(f){return En(f,r(Ln)),Ln.result()},a.bounds=function(f){return En(f,r(On)),On.result()},a.centroid=function(f){return En(f,r(b)),b.result()},a.projection=function(f){return arguments.length?(r=f==null?(t=null,at):(t=f).stream,a):t},a.context=function(f){return arguments.length?(o=f==null?(n=null,new Ft(i)):new pe(n=f),typeof e!="function"&&o.pointRadius(e),a):n},a.pointRadius=function(f){return arguments.length?(e=typeof f=="function"?f:(o.pointRadius(+f),+f),a):e},a.digits=function(f){if(!arguments.length)return i;if(f==null)i=null;else{const g=Math.floor(f);if(!(g>=0))throw new RangeError(`invalid digits: ${f}`);i=g}return n===null&&(o=new Ft(i)),a},a.projection(t).digits(i).context(n)}function yt(t){return function(n){var i=new mt;for(var e in t)i[e]=t[e];return i.stream=n,i}}function mt(){}mt.prototype={constructor:mt,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function $t(t,n,i){var e=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),e!=null&&t.clipExtent(null),En(i,t.stream(On)),n(On.result()),e!=null&&t.clipExtent(e),t}function _e(t,n,i){return $t(t,function(e){var r=n[1][0]-n[0][0],o=n[1][1]-n[0][1],a=Math.min(r/(e[1][0]-e[0][0]),o/(e[1][1]-e[0][1])),f=+n[0][0]+(r-a*(e[1][0]+e[0][0]))/2,g=+n[0][1]+(o-a*(e[1][1]+e[0][1]))/2;t.scale(150*a).translate([f,g])},i)}function ci(t,n,i){return _e(t,[[0,0],n],i)}function pi(t,n,i){return $t(t,function(e){var r=+n,o=r/(e[1][0]-e[0][0]),a=(r-o*(e[1][0]+e[0][0]))/2,f=-o*e[0][1];t.scale(150*o).translate([a,f])},i)}function hi(t,n,i){return $t(t,function(e){var r=+n,o=r/(e[1][1]-e[0][1]),a=-o*e[0][0],f=(r-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,f])},i)}var Vt=16,gi=B(30*F);function Wt(t,n){return+n?vi(t,n):di(t)}function di(t){return yt({point:function(n,i){n=t(n,i),this.stream.point(n[0],n[1])}})}function vi(t,n){function i(e,r,o,a,f,g,h,l,s,c,p,u,v,d){var S=h-e,w=l-r,$=S*S+w*w;if($>4*n&&v--){var m=a+c,E=f+p,y=g+u,C=_n(m*m+E*E+y*y),R=Dn(y/=C),k=L(L(y)-1)<A||L(o-s)<A?(o+s)/2:An(E,m),D=t(k,R),P=D[0],j=D[1],H=P-e,z=j-r,_=w*H-S*z;(_*_/$>n||L((S*H+w*z)/$-.5)>.3||a*c+f*p+g*u<gi)&&(i(e,r,o,a,f,g,P,j,k,m/=C,E/=C,y,v,d),d.point(P,j),i(P,j,k,m,E,y,h,l,s,c,p,u,v,d))}}return function(e){var r,o,a,f,g,h,l,s,c,p,u,v,d={point:S,lineStart:w,lineEnd:m,polygonStart:function(){e.polygonStart(),d.lineStart=E},polygonEnd:function(){e.polygonEnd(),d.lineStart=w}};function S(R,k){R=t(R,k),e.point(R[0],R[1])}function w(){s=NaN,d.point=$,e.lineStart()}function $(R,k){var D=Pn([R,k]),P=t(R,k);i(s,c,l,p,u,v,s=P[0],c=P[1],l=R,p=D[0],u=D[1],v=D[2],Vt,e),e.point(s,c)}function m(){d.point=S,e.lineEnd()}function E(){w(),d.point=y,d.lineEnd=C}function y(R,k){$(r=R,k),o=s,a=c,f=p,g=u,h=v,d.point=$}function C(){i(s,c,l,p,u,v,o,a,r,f,g,h,Vt,e),d.lineEnd=m,m()}return d}}var _i=yt({point:function(t,n){this.stream.point(t*F,n*F)}});function mi(t){return yt({point:function(n,i){var e=t(n,i);return this.stream.point(e[0],e[1])}})}function Ei(t,n,i,e,r){function o(a,f){return a*=e,f*=r,[n+t*a,i-t*f]}return o.invert=function(a,f){return[(a-n)/t*e,(i-f)/t*r]},o}function Gt(t,n,i,e,r,o){if(!o)return Ei(t,n,i,e,r);var a=B(o),f=q(o),g=a*t,h=f*t,l=a/t,s=f/t,c=(f*i-a*n)/t,p=(f*n+a*i)/t;function u(v,d){return v*=e,d*=r,[g*v-h*d+n,i-h*v-g*d]}return u.invert=function(v,d){return[e*(l*v-s*d+c),r*(p-s*v-l*d)]},u}function Si(t){return wi(function(){return t})()}function wi(t){var n,i=150,e=480,r=250,o=0,a=0,f=0,g=0,h=0,l,s=0,c=1,p=1,u=null,v=Dt,d=null,S,w,$,m=at,E=.5,y,C,R,k,D;function P(_){return R(_[0]*F,_[1]*F)}function j(_){return _=R.invert(_[0],_[1]),_&&[_[0]*K,_[1]*K]}P.stream=function(_){return k&&D===_?k:k=_i(mi(l)(v(y(m(D=_)))))},P.preclip=function(_){return arguments.length?(v=_,u=void 0,z()):v},P.postclip=function(_){return arguments.length?(m=_,d=S=w=$=null,z()):m},P.clipAngle=function(_){return arguments.length?(v=+_?Qe(u=_*F):(u=null,Dt),z()):u*K},P.clipExtent=function(_){return arguments.length?(m=_==null?(d=S=w=$=null,at):be(d=+_[0][0],S=+_[0][1],w=+_[1][0],$=+_[1][1]),z()):d==null?null:[[d,S],[w,$]]},P.scale=function(_){return arguments.length?(i=+_,H()):i},P.translate=function(_){return arguments.length?(e=+_[0],r=+_[1],H()):[e,r]},P.center=function(_){return arguments.length?(o=_[0]%360*F,a=_[1]%360*F,H()):[o*K,a*K]},P.rotate=function(_){return arguments.length?(f=_[0]%360*F,g=_[1]%360*F,h=_.length>2?_[2]%360*F:0,H()):[f*K,g*K,h*K]},P.angle=function(_){return arguments.length?(s=_%360*F,H()):s*K},P.reflectX=function(_){return arguments.length?(c=_?-1:1,H()):c<0},P.reflectY=function(_){return arguments.length?(p=_?-1:1,H()):p<0},P.precision=function(_){return arguments.length?(y=Wt(C,E=_*_),z()):_n(E)},P.fitExtent=function(_,M){return _e(P,_,M)},P.fitSize=function(_,M){return ci(P,_,M)},P.fitWidth=function(_,M){return pi(P,_,M)},P.fitHeight=function(_,M){return hi(P,_,M)};function H(){var _=Gt(i,0,0,c,p,s).apply(null,n(o,a)),M=Gt(i,e-_[0],r-_[1],c,p,s);return l=ee(f,g,h),C=ut(n,M),R=ut(l,C),y=Wt(C,E),z()}function z(){return k=D=null,P}return function(){return n=t.apply(this,arguments),P.invert=n.invert&&j,H()}}function Pt(t,n){return[t,ze(Ae((rn+n)/2))]}Pt.invert=function(t,n){return[t,2*ne(De(n))-rn]};function yi(){return $i(Pt).scale(961/Q)}function $i(t){var n=Si(t),i=n.center,e=n.scale,r=n.translate,o=n.clipExtent,a=null,f,g,h;n.scale=function(s){return arguments.length?(e(s),l()):e()},n.translate=function(s){return arguments.length?(r(s),l()):r()},n.center=function(s){return arguments.length?(i(s),l()):i()},n.clipExtent=function(s){return arguments.length?(s==null?a=f=g=h=null:(a=+s[0][0],f=+s[0][1],g=+s[1][0],h=+s[1][1]),l()):a==null?null:[[a,f],[g,h]]};function l(){var s=I*e(),c=n(Ge(n.rotate()).invert([0,0]));return o(a==null?[[c[0]-s,c[1]-s],[c[0]+s,c[1]+s]]:t===Pt?[[Math.max(c[0]-s,a),f],[Math.min(c[0]+s,g),h]]:[[a,Math.max(c[1]-s,f)],[g,Math.min(c[1]+s,h)]])}return l()}function Pi(t){let n,i,e,r,o;const a=t[10].default,f=Ee(a,t,t[9],null);return{c(){n=X("div"),f&&f.c(),this.h()},l(g){n=Y(g,"DIV",{class:!0,style:!0});var h=Z(n);f&&f.l(h),h.forEach(N),this.h()},h(){T(n,"class",i="tooltip "+t[6]+" svelte-1911ge5"),T(n,"style",e="--offset: "+t[2]+"rem; top: "+t[1]+"px; left: "+t[0]+"px; "+t[3]),Ot(()=>t[11].call(n))},m(g,h){V(g,n,h),f&&f.m(n,null),r=Qt(n,t[11].bind(n)),o=!0},p(g,[h]){f&&f.p&&(!o||h&512)&&Se(f,a,g,g[9],o?ye(a,g[9],h,null):we(g[9]),null),(!o||h&64&&i!==(i="tooltip "+g[6]+" svelte-1911ge5"))&&T(n,"class",i),(!o||h&15&&e!==(e="--offset: "+g[2]+"rem; top: "+g[1]+"px; left: "+g[0]+"px; "+g[3]))&&T(n,"style",e)},i(g){o||(O(f,g),o=!0)},o(g){x(f,g),o=!1},d(g){g&&N(n),f&&f.d(g),r()}}}function Ri(t,n,i){let e,r,{$$slots:o={},$$scope:a}=n,{x:f}=n,{y:g}=n,{width:h}=n,{offset:l=0}=n,{style:s=""}=n,c,p;function u(){c=this.clientWidth,p=this.clientHeight,i(4,c),i(5,p)}return t.$$set=v=>{"x"in v&&i(0,f=v.x),"y"in v&&i(1,g=v.y),"width"in v&&i(7,h=v.width),"offset"in v&&i(2,l=v.offset),"style"in v&&i(3,s=v.style),"$$scope"in v&&i(9,a=v.$$scope)},t.$$.update=()=>{t.$$.dirty&48&&i(8,e=(v,d,S)=>!c||!p?"hidden":v<c*.5?"left":v>S-c*.5?"right":d<p*1.5?"top":"bottom"),t.$$.dirty&387&&i(6,r=e(f,g,h))},[f,g,l,s,c,p,r,h,e,a,o,u]}class Ni extends St{constructor(n){super(),wt(this,n,Ri,Pi,Et,{x:0,y:1,width:7,offset:2,style:3})}}function Xt(t,n,i){const e=t.slice();return e[13]=n[i],e}function Yt(t){let n,i,e,r,o;function a(){return t[8](t[13])}return{c(){n=it("path"),this.h()},l(f){n=rt(f,"path",{class:!0,d:!0}),Z(n).forEach(N),this.h()},h(){T(n,"class",i="county "+t[13].properties[t[0]]+" svelte-di86yo"),T(n,"d",e=t[7](t[13]))},m(f,g){V(f,n,g),r||(o=[Rt(n,"mouseenter",a),Rt(n,"mouseleave",t[9])],r=!0)},p(f,g){t=f,g&5&&i!==(i="county "+t[13].properties[t[0]]+" svelte-di86yo")&&T(n,"class",i),g&4&&e!==(e=t[7](t[13]))&&T(n,"d",e)},d(f){f&&N(n),r=!1,$e(o)}}}function Zt(t){let n,i;return n=new Ni({props:{x:t[5].position[0]*(t[4]/wn),y:t[5].position[1]*(t[4]/wn),width:t[4],offset:.5,$$slots:{default:[Ci]},$$scope:{ctx:t}}}),{c(){cn(n.$$.fragment)},l(e){pn(n.$$.fragment,e)},m(e,r){hn(n,e,r),i=!0},p(e,r){const o={};r&48&&(o.x=e[5].position[0]*(e[4]/wn)),r&48&&(o.y=e[5].position[1]*(e[4]/wn)),r&16&&(o.width=e[4]),r&65576&&(o.$$scope={dirty:r,ctx:e}),n.$set(o)},i(e){i||(O(n.$$.fragment,e),i=!0)},o(e){x(n.$$.fragment,e),i=!1},d(e){gn(n,e)}}}function Mi(t){let n,i="∅";return{c(){n=X("span"),n.textContent=i,this.h()},l(e){n=Y(e,"SPAN",{style:!0,"data-svelte-h":!0}),Yn(n)!=="svelte-p0ioob"&&(n.textContent=i),this.h()},h(){Ne(n,"margin-left","3px")},m(e,r){V(e,n,r)},p:Hn,d(e){e&&N(n)}}}function ki(t){let n,i=t[3].find(t[10]).label+"",e,r;return{c(){n=X("span"),e=yn(i),this.h()},l(o){n=Y(o,"SPAN",{class:!0});var a=Z(n);e=$n(a,i),a.forEach(N),this.h()},h(){T(n,"class",r="swatch "+t[5].datum.population1870+" svelte-di86yo")},m(o,a){V(o,n,a),G(n,e)},p(o,a){a&40&&i!==(i=o[3].find(o[10]).label+"")&&Xn(e,i),a&32&&r!==(r="swatch "+o[5].datum.population1870+" svelte-di86yo")&&T(n,"class",r)},d(o){o&&N(n)}}}function Ci(t){let n,i=t[5].datum.name+"",e,r,o,a,f="1870",g,h,l,s,c="1880",p,u,v=t[3].find(t[11]).label+"",d,S;function w(E,y){return E[5].datum.population1870?ki:Mi}let $=w(t),m=$(t);return{c(){n=X("h3"),e=yn(i),r=nn(),o=X("p"),a=X("b"),a.textContent=f,g=nn(),m.c(),h=nn(),l=X("p"),s=X("b"),s.textContent=c,p=nn(),u=X("span"),d=yn(v),this.h()},l(E){n=Y(E,"H3",{});var y=Z(n);e=$n(y,i),y.forEach(N),r=tn(E),o=Y(E,"P",{});var C=Z(o);a=Y(C,"B",{"data-svelte-h":!0}),Yn(a)!=="svelte-scgvi2"&&(a.textContent=f),g=tn(C),m.l(C),C.forEach(N),h=tn(E),l=Y(E,"P",{});var R=Z(l);s=Y(R,"B",{"data-svelte-h":!0}),Yn(s)!=="svelte-xtusyj"&&(s.textContent=c),p=tn(R),u=Y(R,"SPAN",{class:!0});var k=Z(u);d=$n(k,v),k.forEach(N),R.forEach(N),this.h()},h(){T(u,"class",S="swatch "+t[5].datum.population1880+" svelte-di86yo")},m(E,y){V(E,n,y),G(n,e),V(E,r,y),V(E,o,y),G(o,a),G(o,g),m.m(o,null),V(E,h,y),V(E,l,y),G(l,s),G(l,p),G(l,u),G(u,d)},p(E,y){y&32&&i!==(i=E[5].datum.name+"")&&Xn(e,i),$===($=w(E))&&m?m.p(E,y):(m.d(1),m=$(E),m&&(m.c(),m.m(o,null))),y&40&&v!==(v=E[3].find(E[11]).label+"")&&Xn(d,v),y&32&&S!==(S="swatch "+E[5].datum.population1880+" svelte-di86yo")&&T(u,"class",S)},d(E){E&&(N(n),N(r),N(o),N(h),N(l)),m.d()}}}function Ii(t){let n,i,e,r,o,a,f,g,h,l,s=Zn(t[2].features),c=[];for(let u=0;u<s.length;u+=1)c[u]=Yt(Xt(t,s,u));let p=t[5]&&t[5].datum&&Zt(t);return{c(){n=X("div"),i=X("h2"),e=yn(t[1]),r=nn(),o=X("div"),a=it("svg"),f=it("g");for(let u=0;u<c.length;u+=1)c[u].c();g=nn(),p&&p.c(),this.h()},l(u){n=Y(u,"DIV",{class:!0});var v=Z(n);i=Y(v,"H2",{class:!0});var d=Z(i);e=$n(d,t[1]),d.forEach(N),r=tn(v),o=Y(v,"DIV",{class:!0});var S=Z(o);a=rt(S,"svg",{viewBox:!0,class:!0});var w=Z(a);f=rt(w,"g",{class:!0});var $=Z(f);for(let m=0;m<c.length;m+=1)c[m].l($);$.forEach(N),w.forEach(N),g=tn(S),p&&p.l(S),S.forEach(N),v.forEach(N),this.h()},h(){T(i,"class","svelte-di86yo"),T(f,"class","counties"),T(a,"viewBox","0 0 "+wn+" "+me),T(a,"class","svelte-di86yo"),T(o,"class","wrapper svelte-di86yo"),T(n,"class","map svelte-di86yo"),Ot(()=>t[12].call(n))},m(u,v){V(u,n,v),G(n,i),G(i,e),G(n,r),G(n,o),G(o,a),G(a,f);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(f,null);G(o,g),p&&p.m(o,null),h=Qt(n,t[12].bind(n)),l=!0},p(u,[v]){if((!l||v&2)&&Xn(e,u[1]),v&229){s=Zn(u[2].features);let d;for(d=0;d<s.length;d+=1){const S=Xt(u,s,d);c[d]?c[d].p(S,v):(c[d]=Yt(S),c[d].c(),c[d].m(f,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=s.length}u[5]&&u[5].datum?p?(p.p(u,v),v&32&&O(p,1)):(p=Zt(u),p.c(),O(p,1),p.m(o,null)):p&&(Ut(),x(p,1,1,()=>{p=null}),bt())},i(u){l||(O(p),l=!0)},o(u){x(p),l=!1},d(u){u&&N(n),xt(c,u),p&&p.d(),h()}}}const wn=1e3,me=1050;function zi(t,n,i){let{key:e}=n,{title:r}=n,{counties:o}=n,{categories:a}=n;const f=yi().fitSize([wn,me],o),g=si().projection(f);let h,l=null;const s=d=>{i(5,l={datum:d.properties,position:f(Te(d))})},c=()=>i(5,l=null),p=d=>d.id===l.datum.population1870,u=d=>d.id===l.datum.population1880;function v(){h=this.clientWidth,i(4,h)}return t.$$set=d=>{"key"in d&&i(0,e=d.key),"title"in d&&i(1,r=d.title),"counties"in d&&i(2,o=d.counties),"categories"in d&&i(3,a=d.categories)},[e,r,o,a,h,l,f,g,s,c,p,u,v]}class jt extends St{constructor(n){super(),wt(this,n,zi,Ii,Et,{key:0,title:1,counties:2,categories:3})}}function Jt(t,n,i){const e=t.slice();return e[3]=n[i],e}function Ai(t){let n,i,e,r,o,a,f,g,h,l,s;n=new Le({props:{$$slots:{default:[Ti]},$$scope:{ctx:t}}});let c=Zn(t[2]),p=[];for(let u=0;u<c.length;u+=1)p[u]=Kt(Jt(t,c,u));return a=new jt({props:{key:"population1870",title:"1870",counties:t[1],categories:t[2]}}),g=new jt({props:{key:"population1880",title:"1880",counties:t[1],categories:t[2]}}),l=new He({props:{$$slots:{week:[Hi],default:[Li]},$$scope:{ctx:t}}}),{c(){cn(n.$$.fragment),i=nn(),e=X("div");for(let u=0;u<p.length;u+=1)p[u].c();r=nn(),o=X("div"),cn(a.$$.fragment),f=nn(),cn(g.$$.fragment),h=nn(),cn(l.$$.fragment),this.h()},l(u){pn(n.$$.fragment,u),i=tn(u),e=Y(u,"DIV",{class:!0});var v=Z(e);for(let S=0;S<p.length;S+=1)p[S].l(v);v.forEach(N),r=tn(u),o=Y(u,"DIV",{class:!0});var d=Z(o);pn(a.$$.fragment,d),f=tn(d),pn(g.$$.fragment,d),d.forEach(N),h=tn(u),pn(l.$$.fragment,u),this.h()},h(){T(e,"class","legend svelte-1ndarsf"),T(o,"class","maps svelte-1ndarsf")},m(u,v){hn(n,u,v),V(u,i,v),V(u,e,v);for(let d=0;d<p.length;d+=1)p[d]&&p[d].m(e,null);V(u,r,v),V(u,o,v),hn(a,o,null),G(o,f),hn(g,o,null),V(u,h,v),hn(l,u,v),s=!0},p(u,v){const d={};if(v&64&&(d.$$scope={dirty:v,ctx:u}),n.$set(d),v&4){c=Zn(u[2]);let m;for(m=0;m<c.length;m+=1){const E=Jt(u,c,m);p[m]?p[m].p(E,v):(p[m]=Kt(E),p[m].c(),p[m].m(e,null))}for(;m<p.length;m+=1)p[m].d(1);p.length=c.length}const S={};v&2&&(S.counties=u[1]),a.$set(S);const w={};v&2&&(w.counties=u[1]),g.$set(w);const $={};v&64&&($.$$scope={dirty:v,ctx:u}),l.$set($)},i(u){s||(O(n.$$.fragment,u),O(a.$$.fragment,u),O(g.$$.fragment,u),O(l.$$.fragment,u),s=!0)},o(u){x(n.$$.fragment,u),x(a.$$.fragment,u),x(g.$$.fragment,u),x(l.$$.fragment,u),s=!1},d(u){u&&(N(i),N(e),N(r),N(o),N(h)),gn(n,u),xt(p,u),gn(a),gn(g),gn(l,u)}}}function Di(t){let n,i;return n=new Be({}),{c(){cn(n.$$.fragment)},l(e){pn(n.$$.fragment,e)},m(e,r){hn(n,e,r),i=!0},p:Hn,i(e){i||(O(n.$$.fragment,e),i=!0)},o(e){x(n.$$.fragment,e),i=!1},d(e){gn(n,e)}}}function Ti(t){let n;return{c(){n=yn("Population noire en Géorgie par comtés")},l(i){n=$n(i,"Population noire en Géorgie par comtés")},m(i,e){V(i,n,e)},d(i){i&&N(n)}}}function Kt(t){let n,i=t[3].label+"",e,r;return{c(){n=X("div"),e=yn(i),r=nn(),this.h()},l(o){n=Y(o,"DIV",{class:!0});var a=Z(n);e=$n(a,i),r=tn(a),a.forEach(N),this.h()},h(){T(n,"class","swatch "+t[3].id+" svelte-1ndarsf")},m(o,a){V(o,n,a),G(n,e),G(n,r)},p:Hn,d(o){o&&N(n)}}}function Li(t){let n,i;return n=new qe({props:{next:"/challenge02"}}),{c(){cn(n.$$.fragment)},l(e){pn(n.$$.fragment,e)},m(e,r){hn(n,e,r),i=!0},p:Hn,i(e){i||(O(n.$$.fragment,e),i=!0)},o(e){x(n.$$.fragment,e),i=!1},d(e){gn(n,e)}}}function Hi(t){let n,i="Semaine 1";return{c(){n=X("a"),n.textContent=i,this.h()},l(e){n=Y(e,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),Yn(n)!=="svelte-1q2t3s5"&&(n.textContent=i),this.h()},h(){T(n,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge01/original-plate-06.jpg"),T(n,"target","_blank"),T(n,"slot","week")},m(e,r){V(e,n,r)},p:Hn,d(e){e&&N(n)}}}function Bi(t){let n,i,e,r,o;const a=[Di,Ai],f=[];function g(h,l){return h[0]?1:0}return i=g(t),e=f[i]=a[i](t),{c(){n=nn(),e.c(),r=Nt(),this.h()},l(h){Me("svelte-1ri7pze",document.head).forEach(N),n=tn(h),e.l(h),r=Nt(),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 1"},m(h,l){V(h,n,l),f[i].m(h,l),V(h,r,l),o=!0},p(h,[l]){let s=i;i=g(h),i===s?f[i].p(h,l):(Ut(),x(f[s],1,1,()=>{f[s]=null}),bt(),e=f[i],e?e.p(h,l):(e=f[i]=a[i](h),e.c()),O(e,1),e.m(r.parentNode,r))},i(h){o||(O(e),o=!0)},o(h){x(e),o=!1},d(h){h&&(N(n),N(r)),f[i].d(h)}}}function qi(t,n,i){let e=!1,r;return Pe(async()=>{i(1,r=await Ve("data/challenge01/counties.geojson")),await Re(),balanceText(),setTimeout(()=>i(0,e=!0),500)}),[e,r,[{id:"from20000to30000",label:"20 000 à 30 000"},{id:"from15000to20000",label:"15 000 à 20 000"},{id:"from10000to15000",label:"10 000 à 15 000"},{id:"from5000to10000",label:"5000 à 10 000"},{id:"from2500to5000",label:"2500 à 5000"},{id:"from1000to2500",label:"1000 à 2500"},{id:"inf1000",label:"Moins de 1000"}]]}class Gi extends St{constructor(n){super(),wt(this,n,qi,Bi,Et,{})}}export{Gi as component};
