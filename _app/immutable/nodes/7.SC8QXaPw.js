import{s as Q,a as Y,n as j,e as Z,o as x}from"../chunks/scheduler.bEJZjyk8.js";import{S as R,i as U,e as E,s as k,c as C,a as $,d,l as w,b as _,f as v,m as p,g as ee,o as X,j as D,k as S,p as q,q as y,r as z,u as B,v as te,w as I,x as N,t as g,h as b,y as A,z as V,A as ae,B as G}from"../chunks/index.4VFj14VL.js";import{e as H,l as se,b as le,C as re,a as ne,L as ie,N as oe}from"../chunks/Tooltip.svelte_svelte_type_style_lang.6tg1vEcr.js";import{s as fe}from"../chunks/sum.o3Vi7g46.js";import{c as ce,a as he}from"../chunks/dsv.fs0VKOqp.js";function T(o,e,a){const t=o.slice();return t[6]=e[a],t}function F(o,e,a){const t=o.slice();return t[6]=e[a],t}function P(o){let e,a,t=o[6].label+"",s,c,h,f=o[6].description+"",i,n,l,r;return{c(){e=E("div"),a=E("h3"),s=D(t),c=k(),h=E("h4"),i=D(f),n=k(),this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0});var m=$(e);a=C(m,"H3",{class:!0});var L=$(a);s=S(L,t),L.forEach(d),c=w(m),h=C(m,"H4",{class:!0});var M=$(h);i=S(M,f),M.forEach(d),n=w(m),m.forEach(d),this.h()},h(){_(a,"class","label svelte-psh86p"),_(h,"class","description svelte-psh86p"),_(e,"class","legend-item svelte-psh86p"),q(e,"top",o[2](o[6].offset)+"px")},m(u,m){v(u,e,m),p(e,a),p(a,s),p(e,c),p(e,h),p(h,i),p(e,n),l||(r=Z(le.call(null,h)),l=!0)},p(u,m){m&4&&q(e,"top",u[2](u[6].offset)+"px")},d(u){u&&d(e),l=!1,r()}}}function W(o){let e,a,t=H(o[3]),s=[];for(let c=0;c<t.length;c+=1)s[c]=J(T(o,t,c));return{c(){e=y("svg"),a=y("g");for(let c=0;c<s.length;c+=1)s[c].c();this.h()},l(c){e=z(c,"svg",{width:!0,height:!0});var h=$(e);a=z(h,"g",{class:!0});var f=$(a);for(let i=0;i<s.length;i+=1)s[i].l(f);f.forEach(d),h.forEach(d),this.h()},h(){_(a,"class","bar"),_(e,"width",o[0]),_(e,"height",o[1])},m(c,h){v(c,e,h),p(e,a);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(a,null)},p(c,h){if(h&13){t=H(c[3]);let f;for(f=0;f<t.length;f+=1){const i=T(c,t,f);s[f]?s[f].p(i,h):(s[f]=J(i),s[f].c(),s[f].m(a,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=t.length}h&1&&_(e,"width",c[0]),h&2&&_(e,"height",c[1])},d(c){c&&d(e),X(s,c)}}}function J(o){let e,a,t,s,c=o[6].percentage+"",h,f,i,n,l;return{c(){e=y("g"),a=y("rect"),s=y("text"),h=D(c),f=D(` %
							`),this.h()},l(r){e=z(r,"g",{class:!0,transform:!0});var u=$(e);a=z(u,"rect",{width:!0,height:!0,class:!0}),$(a).forEach(d),s=z(u,"text",{class:!0,x:!0,y:!0});var m=$(s);h=S(m,c),f=S(m,` %
							`),m.forEach(d),u.forEach(d),this.h()},h(){_(a,"width",o[0]),_(a,"height",t=o[2](o[6].percentage)),_(a,"class","svelte-psh86p"),_(s,"class","label svelte-psh86p"),_(s,"x",i=o[0]*.5),_(s,"y",n=o[2](o[6].percentage)*.5),_(e,"class","subbar "+o[6].category+" svelte-psh86p"),_(e,"transform",l="translate(0,"+o[2](o[6].offset)+")")},m(r,u){v(r,e,u),p(e,a),p(e,s),p(s,h),p(s,f)},p(r,u){u&1&&_(a,"width",r[0]),u&4&&t!==(t=r[2](r[6].percentage))&&_(a,"height",t),u&1&&i!==(i=r[0]*.5)&&_(s,"x",i),u&4&&n!==(n=r[2](r[6].percentage)*.5)&&_(s,"y",n),u&4&&l!==(l="translate(0,"+r[2](r[6].offset)+")")&&_(e,"transform",l)},d(r){r&&d(e)}}}function ue(o){let e,a,t,s,c,h=H(o[3]),f=[];for(let n=0;n<h.length;n+=1)f[n]=P(F(o,h,n));let i=o[0]&&W(o);return{c(){e=E("div"),a=E("div");for(let n=0;n<f.length;n+=1)f[n].c();t=k(),s=E("div"),i&&i.c(),this.h()},l(n){e=C(n,"DIV",{class:!0});var l=$(e);a=C(l,"DIV",{class:!0});var r=$(a);for(let m=0;m<f.length;m+=1)f[m].l(r);r.forEach(d),t=w(l),s=C(l,"DIV",{class:!0});var u=$(s);i&&i.l(u),u.forEach(d),l.forEach(d),this.h()},h(){_(a,"class","legend svelte-psh86p"),_(s,"class","chart svelte-psh86p"),Y(()=>o[5].call(s)),_(e,"class","chart-container svelte-psh86p")},m(n,l){v(n,e,l),p(e,a);for(let r=0;r<f.length;r+=1)f[r]&&f[r].m(a,null);p(e,t),p(e,s),i&&i.m(s,null),c=ee(s,o[5].bind(s))},p(n,[l]){if(l&12){h=H(n[3]);let r;for(r=0;r<h.length;r+=1){const u=F(n,h,r);f[r]?f[r].p(u,l):(f[r]=P(u),f[r].c(),f[r].m(a,null))}for(;r<f.length;r+=1)f[r].d(1);f.length=h.length}n[0]?i?i.p(n,l):(i=W(n),i.c(),i.m(s,null)):i&&(i.d(1),i=null)},i:j,o:j,d(n){n&&d(e),X(f,n),i&&i.d(),c()}}}function _e(o,e,a){let t,s,{data:c}=e,h;const f=c.map((n,l,r)=>({...n,offset:fe(r.slice(0,l),u=>u.percentage)}));function i(){h=this.clientWidth,a(0,h)}return o.$$set=n=>{"data"in n&&a(4,c=n.data)},o.$$.update=()=>{o.$$.dirty&1&&a(1,t=h*2.8),o.$$.dirty&2&&a(2,s=se().domain([0,100]).range([0,t]))},[h,t,s,f,c,i]}class de extends R{constructor(e){super(),U(this,e,_e,ue,Q,{data:4})}}function K(o){let e,a;return e=new ie({}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,s){N(e,t,s),a=!0},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function me(o){let e;return{c(){e=D("Métissage en Géorgie")},l(a){e=S(a,"Métissage en Géorgie")},m(a,t){v(a,e,t)},d(a){a&&d(e)}}}function pe(o){let e;return{c(){e=D("Basé sur une étude de 40 000 individus d’origine noire")},l(a){e=S(a,"Basé sur une étude de 40 000 individus d’origine noire")},m(a,t){v(a,e,t)},d(a){a&&d(e)}}}function O(o){let e,a;return e=new de({props:{data:o[1]}}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,s){N(e,t,s),a=!0},p(t,s){const c={};s&2&&(c.data=t[1]),e.$set(c)},i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ge(o){let e,a;return e=new oe({props:{prev:"/challenge04"}}),{c(){B(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,s){N(e,t,s),a=!0},p:j,i(t){a||(g(e.$$.fragment,t),a=!0)},o(t){b(e.$$.fragment,t),a=!1},d(t){V(e,t)}}}function ve(o){let e,a="Semaine 5";return{c(){e=E("a"),e.textContent=a,this.h()},l(t){e=C(t,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),ae(e)!=="svelte-8upnwl"&&(e.textContent=a),this.h()},h(){_(e,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge05/original-plate-13.jpg"),_(e,"target","_blank"),_(e,"slot","week")},m(t,s){v(t,e,s)},p:j,d(t){t&&d(e)}}}function $e(o){let e,a,t,s,c,h,f,i=!o[0]&&K();t=new re({props:{$$slots:{subtitle:[pe],default:[me]},$$scope:{ctx:o}}});let n=o[1]&&O(o);return h=new ne({props:{$$slots:{week:[ve],default:[ge]},$$scope:{ctx:o}}}),{c(){e=k(),i&&i.c(),a=k(),B(t.$$.fragment),s=k(),n&&n.c(),c=k(),B(h.$$.fragment),this.h()},l(l){te("svelte-g4s6k5",document.head).forEach(d),e=w(l),i&&i.l(l),a=w(l),I(t.$$.fragment,l),s=w(l),n&&n.l(l),c=w(l),I(h.$$.fragment,l),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 4"},m(l,r){v(l,e,r),i&&i.m(l,r),v(l,a,r),N(t,l,r),v(l,s,r),n&&n.m(l,r),v(l,c,r),N(h,l,r),f=!0},p(l,[r]){l[0]?i&&(G(),b(i,1,1,()=>{i=null}),A()):i?r&1&&g(i,1):(i=K(),i.c(),g(i,1),i.m(a.parentNode,a));const u={};r&4&&(u.$$scope={dirty:r,ctx:l}),t.$set(u),l[1]?n?(n.p(l,r),r&2&&g(n,1)):(n=O(l),n.c(),g(n,1),n.m(c.parentNode,c)):n&&(G(),b(n,1,1,()=>{n=null}),A());const m={};r&4&&(m.$$scope={dirty:r,ctx:l}),h.$set(m)},i(l){f||(g(i),g(t.$$.fragment,l),g(n),g(h.$$.fragment,l),f=!0)},o(l){b(i),b(t.$$.fragment,l),b(n),b(h.$$.fragment,l),f=!1},d(l){l&&(d(e),d(a),d(s),d(c)),i&&i.d(l),V(t,l),n&&n.d(l),V(h,l)}}}function be(o,e,a){let t=!1,s;return x(async()=>{a(1,s=await ce("data/challenge05/data.csv",he)),setTimeout(()=>a(0,t=!0),500)}),[t,s]}class Se extends R{constructor(e){super(),U(this,e,be,$e,Q,{})}}export{Se as component};
