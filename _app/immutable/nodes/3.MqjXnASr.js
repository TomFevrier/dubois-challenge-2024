import{s as fe,a as _e,r as de,n as K,o as ge,t as ve}from"../chunks/scheduler.CEIrVncP.js";import{S as ue,i as ce,e as y,j as q,s as M,z as O,c as P,a as D,k as G,d,l as S,A as Q,b,f as k,m as E,g as $e,n as F,t as C,r as U,h as I,p as X,B as he,C as x,v as B,w as H,x as T,y as A,D as R,q as be,o as ee,E as ke}from"../chunks/index.sbiNFhB7.js";import{t as we,a as Ee,e as Ce,h as me,p as ye,l as Pe,b as je,c as J,f as De,L as Me,C as Se,d as Ie,N as Ne,g as ze}from"../chunks/utils.k10X1Xwd.js";import"../chunks/paths.4JLrevaf.js";import{T as Be}from"../chunks/Tooltip.KWrL5sO0.js";import{p as He,r as Te,g as Ae,j as Ve}from"../chunks/index.qv7dz3oY.js";function Y(s,e){return[s,Pe(je((me+e)/2))]}Y.invert=function(s,e){return[s,2*Ee(Ce(e))-me]};function qe(){return Ge(Y).scale(961/we)}function Ge(s){var e=He(s),l=e.center,t=e.scale,r=e.translate,a=e.clipExtent,o=null,i,h,$;e.scale=function(c){return arguments.length?(t(c),_()):t()},e.translate=function(c){return arguments.length?(r(c),_()):r()},e.center=function(c){return arguments.length?(l(c),_()):l()},e.clipExtent=function(c){return arguments.length?(c==null?o=i=h=$=null:(o=+c[0][0],i=+c[0][1],h=+c[1][0],$=+c[1][1]),_()):o==null?null:[[o,i],[h,$]]};function _(){var c=ye*t(),p=e(Te(e.rotate()).invert([0,0]));return a(o==null?[[p[0]-c,p[1]-c],[p[0]+c,p[1]+c]]:s===Y?[[Math.max(p[0]-c,o),i],[Math.min(p[0]+c,h),$]]:[[o,Math.max(p[1]-c,i)],[h,Math.min(p[1]+c,$)]])}return _()}function te(s,e,l){const t=s.slice();return t[13]=e[l],t}function le(s){let e,l,t,r,a;function o(){return s[8](s[13])}return{c(){e=O("path"),this.h()},l(i){e=Q(i,"path",{class:!0,role:!0,d:!0}),D(e).forEach(d),this.h()},h(){b(e,"class",l="county "+s[13].properties[s[0]]+" svelte-di86yo"),b(e,"role","img"),b(e,"d",t=s[7](s[13]))},m(i,h){k(i,e,h),r||(a=[x(e,"mouseenter",o),x(e,"mouseleave",s[9])],r=!0)},p(i,h){s=i,h&5&&l!==(l="county "+s[13].properties[s[0]]+" svelte-di86yo")&&b(e,"class",l),h&4&&t!==(t=s[7](s[13]))&&b(e,"d",t)},d(i){i&&d(e),r=!1,de(a)}}}function ne(s){let e,l;return e=new Be({props:{x:s[5].position[0]*(s[4]/V),y:s[5].position[1]*(s[4]/V),width:s[4],offset:.5,$$slots:{default:[Fe]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p(t,r){const a={};r&48&&(a.x=t[5].position[0]*(t[4]/V)),r&48&&(a.y=t[5].position[1]*(t[4]/V)),r&16&&(a.width=t[4]),r&65576&&(a.$$scope={dirty:r,ctx:t}),e.$set(a)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Le(s){let e,l="∅";return{c(){e=y("span"),e.textContent=l,this.h()},l(t){e=P(t,"SPAN",{style:!0,"data-svelte-h":!0}),R(e)!=="svelte-p0ioob"&&(e.textContent=l),this.h()},h(){be(e,"margin-left","3px")},m(t,r){k(t,e,r)},p:K,d(t){t&&d(e)}}}function We(s){let e,l=s[3].find(s[10]).label+"",t,r;return{c(){e=y("span"),t=q(l),this.h()},l(a){e=P(a,"SPAN",{class:!0});var o=D(e);t=G(o,l),o.forEach(d),this.h()},h(){b(e,"class",r="swatch "+s[5].datum.population1870+" svelte-di86yo")},m(a,o){k(a,e,o),E(e,t)},p(a,o){o&40&&l!==(l=a[3].find(a[10]).label+"")&&F(t,l),o&32&&r!==(r="swatch "+a[5].datum.population1870+" svelte-di86yo")&&b(e,"class",r)},d(a){a&&d(e)}}}function Fe(s){let e,l=s[5].datum.name+"",t,r,a,o,i="1870",h,$,_,c,p="1880",u,n,m=s[3].find(s[11]).label+"",f,w;function z(v,j){return v[5].datum.population1870?We:Le}let N=z(s),g=N(s);return{c(){e=y("h3"),t=q(l),r=M(),a=y("p"),o=y("b"),o.textContent=i,h=M(),g.c(),$=M(),_=y("p"),c=y("b"),c.textContent=p,u=M(),n=y("span"),f=q(m),this.h()},l(v){e=P(v,"H3",{});var j=D(e);t=G(j,l),j.forEach(d),r=S(v),a=P(v,"P",{});var L=D(a);o=P(L,"B",{"data-svelte-h":!0}),R(o)!=="svelte-scgvi2"&&(o.textContent=i),h=S(L),g.l(L),L.forEach(d),$=S(v),_=P(v,"P",{});var W=D(_);c=P(W,"B",{"data-svelte-h":!0}),R(c)!=="svelte-xtusyj"&&(c.textContent=p),u=S(W),n=P(W,"SPAN",{class:!0});var Z=D(n);f=G(Z,m),Z.forEach(d),W.forEach(d),this.h()},h(){b(n,"class",w="swatch "+s[5].datum.population1880+" svelte-di86yo")},m(v,j){k(v,e,j),E(e,t),k(v,r,j),k(v,a,j),E(a,o),E(a,h),g.m(a,null),k(v,$,j),k(v,_,j),E(_,c),E(_,u),E(_,n),E(n,f)},p(v,j){j&32&&l!==(l=v[5].datum.name+"")&&F(t,l),N===(N=z(v))&&g?g.p(v,j):(g.d(1),g=N(v),g&&(g.c(),g.m(a,null))),j&40&&m!==(m=v[3].find(v[11]).label+"")&&F(f,m),j&32&&w!==(w="swatch "+v[5].datum.population1880+" svelte-di86yo")&&b(n,"class",w)},d(v){v&&(d(e),d(r),d(a),d($),d(_)),g.d()}}}function Re(s){let e,l,t,r,a,o,i,h,$,_,c=J(s[2].features),p=[];for(let n=0;n<c.length;n+=1)p[n]=le(te(s,c,n));let u=s[5]&&s[5].datum&&ne(s);return{c(){e=y("div"),l=y("h2"),t=q(s[1]),r=M(),a=y("div"),o=O("svg"),i=O("g");for(let n=0;n<p.length;n+=1)p[n].c();h=M(),u&&u.c(),this.h()},l(n){e=P(n,"DIV",{class:!0});var m=D(e);l=P(m,"H2",{class:!0});var f=D(l);t=G(f,s[1]),f.forEach(d),r=S(m),a=P(m,"DIV",{class:!0});var w=D(a);o=Q(w,"svg",{viewBox:!0,class:!0});var z=D(o);i=Q(z,"g",{class:!0});var N=D(i);for(let g=0;g<p.length;g+=1)p[g].l(N);N.forEach(d),z.forEach(d),h=S(w),u&&u.l(w),w.forEach(d),m.forEach(d),this.h()},h(){b(l,"class","svelte-di86yo"),b(i,"class","counties"),b(o,"viewBox","0 0 "+V+" "+pe),b(o,"class","svelte-di86yo"),b(a,"class","wrapper svelte-di86yo"),b(e,"class","map svelte-di86yo"),_e(()=>s[12].call(e))},m(n,m){k(n,e,m),E(e,l),E(l,t),E(e,r),E(e,a),E(a,o),E(o,i);for(let f=0;f<p.length;f+=1)p[f]&&p[f].m(i,null);E(a,h),u&&u.m(a,null),$=$e(e,s[12].bind(e)),_=!0},p(n,[m]){if((!_||m&2)&&F(t,n[1]),m&229){c=J(n[2].features);let f;for(f=0;f<c.length;f+=1){const w=te(n,c,f);p[f]?p[f].p(w,m):(p[f]=le(w),p[f].c(),p[f].m(i,null))}for(;f<p.length;f+=1)p[f].d(1);p.length=c.length}n[5]&&n[5].datum?u?(u.p(n,m),m&32&&C(u,1)):(u=ne(n),u.c(),C(u,1),u.m(a,null)):u&&(U(),I(u,1,1,()=>{u=null}),X())},i(n){_||(C(u),_=!0)},o(n){I(u),_=!1},d(n){n&&d(e),he(p,n),u&&u.d(),$()}}}const V=1e3,pe=1050;function Je(s,e,l){let{key:t}=e,{title:r}=e,{counties:a}=e,{categories:o}=e;const i=qe().fitSize([V,pe],a),h=Ae().projection(i);let $,_=null;const c=f=>{l(5,_={datum:f.properties,position:i(De(f))})},p=()=>l(5,_=null),u=f=>f.id===_.datum.population1870,n=f=>f.id===_.datum.population1880;function m(){$=this.clientWidth,l(4,$)}return s.$$set=f=>{"key"in f&&l(0,t=f.key),"title"in f&&l(1,r=f.title),"counties"in f&&l(2,a=f.counties),"categories"in f&&l(3,o=f.categories)},[t,r,a,o,$,_,i,h,c,p,u,n,m]}class ae extends ue{constructor(e){super(),ce(this,e,Je,Re,fe,{key:0,title:1,counties:2,categories:3})}}function se(s,e,l){const t=s.slice();return t[3]=e[l],t}function oe(s){let e,l;return e=new Me({}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function re(s){let e,l,t,r,a,o,i,h,$,_,c;e=new Se({props:{$$slots:{default:[Ke]},$$scope:{ctx:s}}});let p=J(s[2]),u=[];for(let n=0;n<p.length;n+=1)u[n]=ie(se(s,p,n));return o=new ae({props:{key:"population1870",title:"1870",counties:s[1],categories:s[2]}}),h=new ae({props:{key:"population1880",title:"1880",counties:s[1],categories:s[2]}}),_=new Ie({props:{$$slots:{week:[Qe],default:[Oe]},$$scope:{ctx:s}}}),{c(){B(e.$$.fragment),l=M(),t=y("div");for(let n=0;n<u.length;n+=1)u[n].c();r=M(),a=y("div"),B(o.$$.fragment),i=M(),B(h.$$.fragment),$=M(),B(_.$$.fragment),this.h()},l(n){H(e.$$.fragment,n),l=S(n),t=P(n,"DIV",{class:!0});var m=D(t);for(let w=0;w<u.length;w+=1)u[w].l(m);m.forEach(d),r=S(n),a=P(n,"DIV",{class:!0});var f=D(a);H(o.$$.fragment,f),i=S(f),H(h.$$.fragment,f),f.forEach(d),$=S(n),H(_.$$.fragment,n),this.h()},h(){b(t,"class","legend svelte-1ndarsf"),b(a,"class","maps svelte-1ndarsf")},m(n,m){T(e,n,m),k(n,l,m),k(n,t,m);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null);k(n,r,m),k(n,a,m),T(o,a,null),E(a,i),T(h,a,null),k(n,$,m),T(_,n,m),c=!0},p(n,m){const f={};if(m&64&&(f.$$scope={dirty:m,ctx:n}),e.$set(f),m&4){p=J(n[2]);let g;for(g=0;g<p.length;g+=1){const v=se(n,p,g);u[g]?u[g].p(v,m):(u[g]=ie(v),u[g].c(),u[g].m(t,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=p.length}const w={};m&2&&(w.counties=n[1]),o.$set(w);const z={};m&2&&(z.counties=n[1]),h.$set(z);const N={};m&64&&(N.$$scope={dirty:m,ctx:n}),_.$set(N)},i(n){c||(C(e.$$.fragment,n),C(o.$$.fragment,n),C(h.$$.fragment,n),C(_.$$.fragment,n),c=!0)},o(n){I(e.$$.fragment,n),I(o.$$.fragment,n),I(h.$$.fragment,n),I(_.$$.fragment,n),c=!1},d(n){n&&(d(l),d(t),d(r),d(a),d($)),A(e,n),he(u,n),A(o),A(h),A(_,n)}}}function Ke(s){let e;return{c(){e=q("Population noire en Géorgie par comtés")},l(l){e=G(l,"Population noire en Géorgie par comtés")},m(l,t){k(l,e,t)},d(l){l&&d(e)}}}function ie(s){let e,l=s[3].label+"",t,r;return{c(){e=y("div"),t=q(l),r=M(),this.h()},l(a){e=P(a,"DIV",{class:!0});var o=D(e);t=G(o,l),r=S(o),o.forEach(d),this.h()},h(){b(e,"class","swatch "+s[3].id+" svelte-1ndarsf")},m(a,o){k(a,e,o),E(e,t),E(e,r)},p:K,d(a){a&&d(e)}}}function Oe(s){let e,l;return e=new Ne({props:{next:"/challenge02"}}),{c(){B(e.$$.fragment)},l(t){H(e.$$.fragment,t)},m(t,r){T(e,t,r),l=!0},p:K,i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){I(e.$$.fragment,t),l=!1},d(t){A(e,t)}}}function Qe(s){let e,l="Semaine 1";return{c(){e=y("a"),e.textContent=l,this.h()},l(t){e=P(t,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),R(e)!=="svelte-1q2t3s5"&&(e.textContent=l),this.h()},h(){b(e,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge01/original-plate-06.jpg"),b(e,"target","_blank"),b(e,"slot","week")},m(t,r){k(t,e,r)},p:K,d(t){t&&d(e)}}}function Ue(s){let e,l,t,r,a=!s[0]&&oe(),o=s[1]&&re(s);return{c(){e=M(),a&&a.c(),l=M(),o&&o.c(),t=ee(),this.h()},l(i){ke("svelte-1ri7pze",document.head).forEach(d),e=S(i),a&&a.l(i),l=S(i),o&&o.l(i),t=ee(),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 1"},m(i,h){k(i,e,h),a&&a.m(i,h),k(i,l,h),o&&o.m(i,h),k(i,t,h),r=!0},p(i,[h]){i[0]?a&&(U(),I(a,1,1,()=>{a=null}),X()):a?h&1&&C(a,1):(a=oe(),a.c(),C(a,1),a.m(l.parentNode,l)),i[1]?o?(o.p(i,h),h&2&&C(o,1)):(o=re(i),o.c(),C(o,1),o.m(t.parentNode,t)):o&&(U(),I(o,1,1,()=>{o=null}),X())},i(i){r||(C(a),C(o),r=!0)},o(i){I(a),I(o),r=!1},d(i){i&&(d(e),d(l),d(t)),a&&a.d(i),o&&o.d(i)}}}function Xe(s,e,l){let t=!1,r;return ge(async()=>{l(1,r=await Ve("data/challenge01/counties.geojson")),await ve(),ze(),setTimeout(()=>l(0,t=!0),500)}),[t,r,[{id:"from20000to30000",label:"20 000 à 30 000"},{id:"from15000to20000",label:"15 000 à 20 000"},{id:"from10000to15000",label:"10 000 à 15 000"},{id:"from5000to10000",label:"5000 à 10 000"},{id:"from2500to5000",label:"2500 à 5000"},{id:"from1000to2500",label:"1000 à 2500"},{id:"inf1000",label:"Moins de 1000"}]]}class nt extends ue{constructor(e){super(),ce(this,e,Xe,Ue,fe,{})}}export{nt as component};
