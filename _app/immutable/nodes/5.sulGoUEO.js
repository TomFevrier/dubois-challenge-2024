import{s as ne,a as ue,r as fe,o as he,n as re,t as ce}from"../chunks/scheduler.CEIrVncP.js";import{S as ae,i as le,e as z,c as A,a as C,d as m,b as _,f as v,g as de,t as $,r as q,h as b,p as B,z as D,s as j,o as G,A as L,l as N,B as me,j as M,k as E,m as y,C as F,n as P,v as H,w as I,x as T,y as O,q as V,E as _e,D as pe}from"../chunks/index.sbiNFhB7.js";import{i as se,r as ge,j as $e,c as W,k as S,L as ve,C as be,d as we,N as ke,g as ye}from"../chunks/utils.k10X1Xwd.js";import"../chunks/paths.4JLrevaf.js";import{T as Me}from"../chunks/Tooltip.KWrL5sO0.js";import{c as Ee,a as Ce}from"../chunks/dsv.fs0VKOqp.js";class J extends Map{constructor(e,r=Se){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),e!=null)for(const[t,a]of e)this.set(t,a)}get(e){return super.get(K(this,e))}has(e){return super.has(K(this,e))}set(e,r){return super.set(je(this,e),r)}delete(e){return super.delete(Ne(this,e))}}function K({_intern:n,_key:e},r){const t=e(r);return n.has(t)?n.get(t):r}function je({_intern:n,_key:e},r){const t=e(r);return n.has(t)?n.get(t):(n.set(t,r),r)}function Ne({_intern:n,_key:e},r){const t=e(r);return n.has(t)&&(r=n.get(t),n.delete(t)),r}function Se(n){return n!==null&&typeof n=="object"?n.valueOf():n}function He(n,e){let r;if(e===void 0)for(const t of n)t!=null&&(r<t||r===void 0&&t>=t)&&(r=t);else{let t=-1;for(let a of n)(a=e(a,++t,n))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}const Q=Symbol("implicit");function ie(){var n=new J,e=[],r=[],t=Q;function a(s){let i=n.get(s);if(i===void 0){if(t!==Q)return t;n.set(s,i=e.push(s)-1)}return r[i%r.length]}return a.domain=function(s){if(!arguments.length)return e.slice();e=[],n=new J;for(const i of s)n.has(i)||n.set(i,e.push(i)-1);return a},a.range=function(s){return arguments.length?(r=Array.from(s),a):r.slice()},a.unknown=function(s){return arguments.length?(t=s,a):t},a.copy=function(){return ie(e,r).unknown(t)},se.apply(a,arguments),a}function oe(){var n=ie().unknown(void 0),e=n.domain,r=n.range,t=0,a=1,s,i,l=!1,o=0,h=0,u=.5;delete n.unknown;function g(){var f=e().length,w=a<t,p=w?a:t,c=w?t:a;s=(c-p)/Math.max(1,f-o+h*2),l&&(s=Math.floor(s)),p+=(c-p-s*(f-o))*u,i=s*(1-o),l&&(p=Math.round(p),i=Math.round(i));var d=ge(f).map(function(k){return p+s*k});return r(w?d.reverse():d)}return n.domain=function(f){return arguments.length?(e(f),g()):e()},n.range=function(f){return arguments.length?([t,a]=f,t=+t,a=+a,g()):[t,a]},n.rangeRound=function(f){return[t,a]=f,t=+t,a=+a,l=!0,g()},n.bandwidth=function(){return i},n.step=function(){return s},n.round=function(f){return arguments.length?(l=!!f,g()):l},n.padding=function(f){return arguments.length?(o=Math.min(1,h=+f),g()):o},n.paddingInner=function(f){return arguments.length?(o=Math.min(1,f),g()):o},n.paddingOuter=function(f){return arguments.length?(h=+f,g()):h},n.align=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),g()):u},n.copy=function(){return oe(e(),[t,a]).round(l).paddingInner(o).paddingOuter(h).align(u)},se.apply(g(),arguments)}function U(n,e,r){const t=n.slice();t[11]=e[r],t[14]=r;const a=t[5](t[11].value)-t[5](0);return t[12]=a,t}function X(n){let e,r,t,a,s=W(n[0]),i=[];for(let o=0;o<s.length;o+=1)i[o]=Z(U(n,s,o));let l=n[3]&&x(n);return{c(){e=D("svg");for(let o=0;o<i.length;o+=1)i[o].c();r=j(),l&&l.c(),t=G(),this.h()},l(o){e=L(o,"svg",{width:!0,height:!0});var h=C(e);for(let u=0;u<i.length;u+=1)i[u].l(h);h.forEach(m),r=N(o),l&&l.l(o),t=G(),this.h()},h(){_(e,"width",n[1]),_(e,"height",n[2])},m(o,h){v(o,e,h);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);v(o,r,h),l&&l.m(o,h),v(o,t,h),a=!0},p(o,h){if(h&121){s=W(o[0]);let u;for(u=0;u<s.length;u+=1){const g=U(o,s,u);i[u]?i[u].p(g,h):(i[u]=Z(g),i[u].c(),i[u].m(e,null))}for(;u<i.length;u+=1)i[u].d(1);i.length=s.length}(!a||h&2)&&_(e,"width",o[1]),(!a||h&4)&&_(e,"height",o[2]),o[3]?l?(l.p(o,h),h&8&&$(l,1)):(l=x(o),l.c(),$(l,1),l.m(t.parentNode,t)):l&&(q(),b(l,1,1,()=>{l=null}),B())},i(o){a||($(l),a=!0)},o(o){b(l),a=!1},d(o){o&&(m(e),m(r),m(t)),me(i,o),l&&l.d(o)}}}function Y(n){let e,r=S(",d")(n[6](n[11].value))+"",t,a,s;return{c(){e=D("text"),t=M(r),this.h()},l(i){e=L(i,"text",{class:!0,x:!0,y:!0});var l=C(e);t=E(l,r),l.forEach(m),this.h()},h(){_(e,"class","value svelte-78fsbx"),_(e,"x",a=n[12]*.5),_(e,"y",s=n[4].bandwidth()-3)},m(i,l){v(i,e,l),y(e,t)},p(i,l){l&1&&r!==(r=S(",d")(i[6](i[11].value))+"")&&P(t,r),l&33&&a!==(a=i[12]*.5)&&_(e,"x",a),l&16&&s!==(s=i[4].bandwidth()-3)&&_(e,"y",s)},d(i){i&&m(e)}}}function Z(n){var p;let e,r,t,a,s,i=n[11].year+"",l,o,h,u,g,f=((p=n[3])==null?void 0:p.datum.year)!==n[11].year&&(n[14]===0||n[14]===n[0].length-1)&&Y(n);function w(){return n[7](n[11],n[12])}return{c(){e=D("g"),r=D("rect"),s=D("text"),l=M(i),f&&f.c(),this.h()},l(c){e=L(c,"g",{class:!0,role:!0,transform:!0});var d=C(e);r=L(d,"rect",{width:!0,height:!0,class:!0}),C(r).forEach(m),s=L(d,"text",{class:!0,x:!0,y:!0});var k=C(s);l=E(k,i),k.forEach(m),f&&f.l(d),d.forEach(m),this.h()},h(){_(r,"width",t=n[12]),_(r,"height",a=n[4].bandwidth()),_(r,"class","svelte-78fsbx"),_(s,"class","label svelte-78fsbx"),_(s,"x",0),_(s,"y",o=n[4].bandwidth()*.5),_(e,"class","bar"),_(e,"role","img"),_(e,"transform",h="translate("+n[5](0)+", "+n[4](n[11].year)+")")},m(c,d){v(c,e,d),y(e,r),y(e,s),y(s,l),f&&f.m(e,null),u||(g=[F(e,"mouseenter",w),F(e,"mouseleave",n[8])],u=!0)},p(c,d){var k;n=c,d&33&&t!==(t=n[12])&&_(r,"width",t),d&16&&a!==(a=n[4].bandwidth())&&_(r,"height",a),d&1&&i!==(i=n[11].year+"")&&P(l,i),d&16&&o!==(o=n[4].bandwidth()*.5)&&_(s,"y",o),((k=n[3])==null?void 0:k.datum.year)!==n[11].year&&(n[14]===0||n[14]===n[0].length-1)?f?f.p(n,d):(f=Y(n),f.c(),f.m(e,null)):f&&(f.d(1),f=null),d&49&&h!==(h="translate("+n[5](0)+", "+n[4](n[11].year)+")")&&_(e,"transform",h)},d(c){c&&m(e),f&&f.d(),u=!1,fe(g)}}}function x(n){let e,r;return e=new Me({props:{x:n[3].position[0],y:n[3].position[1],width:n[1],offset:.5,$$slots:{default:[Ie]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){T(e,t,a),r=!0},p(t,a){const s={};a&8&&(s.x=t[3].position[0]),a&8&&(s.y=t[3].position[1]),a&2&&(s.width=t[1]),a&32776&&(s.$$scope={dirty:a,ctx:t}),e.$set(s)},i(t){r||($(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Ie(n){let e,r=n[3].datum.year+"",t,a,s,i=S(",d")(n[6](n[3].datum.value))+"",l,o,h,u,g,f=S(",d")(n[3].datum.value)+"",w,p;return{c(){e=z("h3"),t=M(r),a=j(),s=z("h4"),l=M(i),o=M(" hectares"),h=j(),u=z("p"),g=M("("),w=M(f),p=M(" acres)"),this.h()},l(c){e=A(c,"H3",{});var d=C(e);t=E(d,r),d.forEach(m),a=N(c),s=A(c,"H4",{});var k=C(s);l=E(k,i),o=E(k," hectares"),k.forEach(m),h=N(c),u=A(c,"P",{style:!0});var R=C(u);g=E(R,"("),w=E(R,f),p=E(R," acres)"),R.forEach(m),this.h()},h(){V(u,"text-align","center"),V(u,"justify-content","center")},m(c,d){v(c,e,d),y(e,t),v(c,a,d),v(c,s,d),y(s,l),y(s,o),v(c,h,d),v(c,u,d),y(u,g),y(u,w),y(u,p)},p(c,d){d&8&&r!==(r=c[3].datum.year+"")&&P(t,r),d&8&&i!==(i=S(",d")(c[6](c[3].datum.value))+"")&&P(l,i),d&8&&f!==(f=S(",d")(c[3].datum.value)+"")&&P(w,f)},d(c){c&&(m(e),m(a),m(s),m(h),m(u))}}}function Te(n){let e,r,t,a=n[1]&&X(n);return{c(){e=z("div"),a&&a.c(),this.h()},l(s){e=A(s,"DIV",{class:!0});var i=C(e);a&&a.l(i),i.forEach(m),this.h()},h(){_(e,"class","chart svelte-78fsbx"),ue(()=>n[9].call(e))},m(s,i){v(s,e,i),a&&a.m(e,null),r=de(e,n[9].bind(e)),t=!0},p(s,[i]){s[1]?a?(a.p(s,i),i&2&&$(a,1)):(a=X(s),a.c(),$(a,1),a.m(e,null)):a&&(q(),b(a,1,1,()=>{a=null}),B())},i(s){t||($(a),t=!0)},o(s){b(a),t=!1},d(s){s&&m(e),a&&a.d(),r()}}}function Oe(n,e,r){let t,a,s,{data:i}=e,l;const o={top:0,right:0,bottom:0,left:45},h=p=>p/2.471;let u=null;const g=(p,c)=>{r(3,u={datum:p,position:[a(0)+c-s.bandwidth()*.5,s(p.year)+s.bandwidth()*.5]})},f=()=>r(3,u=null);function w(){l=this.clientWidth,r(1,l)}return n.$$set=p=>{"data"in p&&r(0,i=p.data)},n.$$.update=()=>{n.$$.dirty&2&&r(2,t=l*1.25),n.$$.dirty&3&&r(5,a=$e().domain([0,He(i,p=>p.value)]).range([o.left,l-o.right])),n.$$.dirty&5&&r(4,s=oe().domain(i.map(p=>p.year)).range([o.top,t-o.bottom]).paddingInner(.45))},[i,l,t,u,s,a,h,g,f,w]}class ze extends ae{constructor(e){super(),le(this,e,Oe,Te,ne,{data:0})}}function ee(n){let e,r;return e=new ve({}),{c(){H(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){T(e,t,a),r=!0},i(t){r||($(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function te(n){let e,r,t,a,s,i;return e=new be({props:{$$slots:{default:[Ae]},$$scope:{ctx:n}}}),t=new ze({props:{data:n[1]}}),s=new we({props:{$$slots:{week:[Le],default:[De]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),r=j(),H(t.$$.fragment),a=j(),H(s.$$.fragment)},l(l){I(e.$$.fragment,l),r=N(l),I(t.$$.fragment,l),a=N(l),I(s.$$.fragment,l)},m(l,o){T(e,l,o),v(l,r,o),T(t,l,o),v(l,a,o),T(s,l,o),i=!0},p(l,o){const h={};o&4&&(h.$$scope={dirty:o,ctx:l}),e.$set(h);const u={};o&2&&(u.data=l[1]),t.$set(u);const g={};o&4&&(g.$$scope={dirty:o,ctx:l}),s.$set(g)},i(l){i||($(e.$$.fragment,l),$(t.$$.fragment,l),$(s.$$.fragment,l),i=!0)},o(l){b(e.$$.fragment,l),b(t.$$.fragment,l),b(s.$$.fragment,l),i=!1},d(l){l&&(m(r),m(a)),O(e,l),O(t,l),O(s,l)}}}function Ae(n){let e;return{c(){e=M("Hectares de terrain appartenant à des Noirs en Géorgie")},l(r){e=E(r,"Hectares de terrain appartenant à des Noirs en Géorgie")},m(r,t){v(r,e,t)},d(r){r&&m(e)}}}function De(n){let e,r;return e=new ke({props:{prev:"/challenge02"}}),{c(){H(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,a){T(e,t,a),r=!0},p:re,i(t){r||($(e.$$.fragment,t),r=!0)},o(t){b(e.$$.fragment,t),r=!1},d(t){O(e,t)}}}function Le(n){let e,r="Semaine 3";return{c(){e=z("a"),e.textContent=r,this.h()},l(t){e=A(t,"A",{href:!0,target:!0,slot:!0,"data-svelte-h":!0}),pe(e)!=="svelte-8h3x35"&&(e.textContent=r),this.h()},h(){_(e,"href","https://raw.githubusercontent.com/ajstarks/dubois-data-portraits/master/challenge/2024/challenge03/original-plate-19.jpg"),_(e,"target","_blank"),_(e,"slot","week")},m(t,a){v(t,e,a)},p:re,d(t){t&&m(e)}}}function Pe(n){let e,r,t,a,s=!n[0]&&ee(),i=n[1]&&te(n);return{c(){e=j(),s&&s.c(),r=j(),i&&i.c(),t=G(),this.h()},l(l){_e("svelte-1l9r69k",document.head).forEach(m),e=N(l),s&&s.l(l),r=N(l),i&&i.l(l),t=G(),this.h()},h(){document.title="Du Bois Challenge 2024 | Semaine 3"},m(l,o){v(l,e,o),s&&s.m(l,o),v(l,r,o),i&&i.m(l,o),v(l,t,o),a=!0},p(l,[o]){l[0]?s&&(q(),b(s,1,1,()=>{s=null}),B()):s?o&1&&$(s,1):(s=ee(),s.c(),$(s,1),s.m(r.parentNode,r)),l[1]?i?(i.p(l,o),o&2&&$(i,1)):(i=te(l),i.c(),$(i,1),i.m(t.parentNode,t)):i&&(q(),b(i,1,1,()=>{i=null}),B())},i(l){a||($(s),$(i),a=!0)},o(l){b(s),b(i),a=!1},d(l){l&&(m(e),m(r),m(t)),s&&s.d(l),i&&i.d(l)}}}function Re(n,e,r){let t=!1,a;return he(async()=>{r(1,a=await Ee("data/challenge03/data.csv",Ce)),await ce(),ye(),setTimeout(()=>r(0,t=!0),500)}),[t,a]}class Je extends ae{constructor(e){super(),le(this,e,Re,Pe,ne,{})}}export{Je as component};
